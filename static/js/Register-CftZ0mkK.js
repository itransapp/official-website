import{r as m,l as e,B as w,K as U,M as W,ay as S,y as r,aB as q}from"./index-ooGS-eng.js";import{L as G,F as J}from"./index-B_B8iqCw.js";import{P,c as O}from"./Password-Dnde43BW.js";import{R as Q}from"./index-G35ef5n0.js";import{T as X}from"./Trans-CZhBR_o4.js";import{l as k}from"./chunk-MPX6TMFQ-DabedWYC.js";import{i as y}from"./chunk-TC4QW7OA-Dc1b-uKH.js";import{s as u}from"./chunk-KRADFROI-D_S5jmoG.js";import{s as Y,l as j}from"./chunk-ZFWMN6TD-DqtHI3Hj.js";import"./index-B9vb69oy.js";import"./index-BkN_9Nvo.js";import"./chunk-OFGZKCFR-BR5kwExA.js";import"./chunk-CAFRINWI-CcU5yOMx.js";import"./chunk-LY2CD73K-Db_tUQI9.js";import"./context-DUilK4YP.js";import"./import-DdAb6KNu.js";import"./import-QTDjHlcD.js";import"./chunk-44JHHBS2-6Znt8RG8.js";const Z=i=>{const{children:s=[],showProgressBar:t=!0,defaultActiveStep:a=1,prevText:x,continueText:f,submitText:C,onContinue:d=()=>{},onPrev:b=()=>{},onSubmit:v=()=>{},disableContinue:B=!1,disableSubmit:T=!1,btnPos:A="space-between",barWidth:$="",strokeColor:E="#cdd3d8",fillStroke:L="#3a4047",stroke:N=2,activeColor:V="#3A4047",activeProgressBorder:D="2px solid #f3f4f5",progressBarClassName:R="",contentBoxClassName:I="",allowClickControl:M=!0}=i,[n,h]=m.useState(0);m.useEffect(()=>{a<=s.length&&a>0?(g(a-1),h(a)):(g(0),h(1))},[]),m.useEffect(()=>{s.length>1&&t&&s.map((l,c)=>{const o=document.getElementById(`input_${c}`);o.classList.length>1?(o.style.background=V,o.style.border=D):(o.style.background="#fff",o.style.border="2px solid #3A4047")})},[n]);const K=()=>{if(!n||n<=1)return;g(n-2);const l=n-1;h(l),b(l)},z=()=>{if(!n||n>=s.length)return;g(n);const l=n+1;h(l),d(l)},H=l=>{M&&(h(l+1),g(l))},g=l=>{var c;if(s.length>1&&t){const o=l/(s.length-1)*100;document.getElementsByClassName("percent")[0].style.width=`${o}%`}if(s.length>1&&t)for(let o=0;o<s.length;o++){const p=document.getElementById(`input_${o}`),_=parseInt((c=p==null?void 0:p.id)==null?void 0:c.split("_")[1]);_===l&&(p.classList.add("selected"),p.classList.remove("completed")),_<=l&&p.classList.add("completed"),_>l&&p.classList.remove("selected","completed")}};return e.jsxs("div",{className:"stepperDiv",children:[s.length>1&&t&&e.jsx("div",{className:`progressBarDiv ${R}`,children:e.jsxs("div",{className:"progressBarContainer",style:{width:$},children:[e.jsx("div",{className:"progress",style:{borderBottom:`${N}px solid ${E}`},children:e.jsx("div",{className:"percent",style:{borderBottom:`${N}px solid ${L}`}})}),e.jsx("div",{className:"steps",children:s.map((l,c)=>e.jsx("div",{className:"step",id:`input_${c}`,onClick:()=>H(c)},c))})]})}),e.jsxs("div",{className:I,children:[s.length>1?s.map((l,c)=>n===c+1&&l):s,e.jsxs("div",{style:{display:"flex",justifyContent:A,marginTop:"20px"},children:[n>1?e.jsx(w,{className:"font-medium",color:"default",onPress:K,children:x||"Prev"}):e.jsx("span",{}),n<s.length?e.jsx(w,{className:"font-medium",color:"primary",onPress:()=>z(),isDisabled:B,children:f||"Next"}):e.jsx(w,{className:"font-medium",color:"primary",onPress:()=>v(n),isDisabled:T,children:C||"Submit"})]})]})]})},F=({form:i,setForm:s})=>e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(y,{isClearable:!0,className:"font-medium",type:"text",labelPlacement:"outside",label:r("pages.sign_up.step1.input1"),variant:"bordered",placeholder:" ",value:i.firstname,onValueChange:t=>s({...i,firstname:t})})}),e.jsx(u,{y:4}),e.jsx("div",{children:e.jsx(y,{isClearable:!0,className:"font-medium",type:"text",labelPlacement:"outside",label:r("pages.sign_up.step1.input2"),variant:"bordered",placeholder:" ",value:i.lastname,onValueChange:t=>s({...i,lastname:t})})}),e.jsx(u,{y:4}),e.jsxs(Y,{className:"font-medium",label:r("pages.sign_up.step1.input3"),labelPlacement:"outside",variant:"bordered",placeholder:r("pages.sign_up.step1.input3_placeholder"),onSelectionChange:t=>s({...i,irrigationDitch:t.values().next().value}),children:[e.jsx(j,{children:r("pages.sign_up.step1.options.key1")},"friend-recommend"),e.jsx(j,{children:r("pages.sign_up.step1.options.key2")},"search-engine"),e.jsx(j,{children:r("pages.sign_up.step1.options.key3")},"third-party-website-recommend"),e.jsx(j,{children:r("pages.sign_up.step1.options.key4")},"other")]})]}),ee=({form:i,setForm:s})=>e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(y,{isClearable:!0,className:"font-medium",type:"email",labelPlacement:"outside",label:r("pages.sign_up.step2.input1"),variant:"bordered",placeholder:" ",errorMessage:S(i.email)?"":"invalid email address",value:i.email,onValueChange:t=>s({...i,email:t})})}),e.jsx(u,{y:4}),e.jsx("div",{children:e.jsx(y,{isClearable:!0,className:"font-medium",type:"text",labelPlacement:"outside",label:r("pages.sign_up.step2.input2"),variant:"bordered",placeholder:" ",value:i.inviteCode,onValueChange:t=>s({...i,inviteCode:t})})})]}),se=({form:i,setForm:s})=>e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(P,{className:"font-medium",labelPlacement:"outside",label:r("pages.sign_up.step3.input1"),variant:"bordered",placeholder:" ",value:i.password,onValueChange:t=>s({...i,password:t})})}),e.jsx(u,{y:4}),e.jsx("div",{children:e.jsx(P,{className:"font-medium",labelPlacement:"outside",label:r("pages.sign_up.step3.input2"),variant:"bordered",placeholder:" ",value:i.repeatPassword,onValueChange:t=>s({...i,repeatPassword:t}),errorMessage:i.password!==i.repeatPassword?"invalid repeat password":""})}),e.jsx(u,{y:4}),e.jsx("div",{className:"w-full flex justify-center",children:e.jsx(Q,{onValueChange:t=>{s({...i,recaptcha:t})}})}),e.jsx(u,{y:4}),e.jsx("div",{className:"flex items-start",children:e.jsx(O,{onValueChange:t=>s({...i,acceptTerm:t}),children:e.jsx(X,{i18nKey:"pages.sign_up.step3.terms",components:{Link:e.jsx(k,{href:"/docs/t?part=term"})}})})})]}),je=()=>{const i=U(),[s,t]=m.useState({step:1,disabled:!1}),[a,x]=m.useState({recaptcha:null,acceptTerm:!1,email:"",firstname:"",irrigationDitch:"",lastname:"",password:"",repeatPassword:""}),{show:f}=W(),C=()=>{t({...s,disabled:!0}),q({email:a.email,password:a.password,firstname:a.firstname,lastname:a.lastname,ticket:a.recaptcha,inviteCode:a.inviteCode}).then(d=>{var b,v;if(!((b=d.data)!=null&&b.status)){f({message:(v=d.data)==null?void 0:v.msg});return}i("/login")}).catch(d=>{f({message:d})}).finally(()=>{t({...s,disabled:!1})})};return m.useEffect(()=>{switch(t({...s,disabled:!0}),s.step){case 1:t({...s,disabled:!a.firstname||!a.lastname||!a.irrigationDitch});break;case 2:t({...s,disabled:!a.email||!S(a.email)});break;case 3:t({...s,disabled:!a.recaptcha||!a.password||a.password!==a.repeatPassword||!a.acceptTerm});break}},[a,s.step]),e.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 mx-auto h-screen lg:py-0",children:[e.jsx(k,{href:"/",children:e.jsx(G,{className:"select-none",width:200,loading:"lazy"})}),e.jsx("div",{className:"w-full mt-6 sm:max-w-md xl:p-5 p-2",children:e.jsxs(Z,{defaultActiveStep:s.step,showProgressBar:!1,prevText:r("step_prev"),continueText:r("step_next"),submitText:r("pages.sign_up.sign_up"),disableContinue:s.disabled,disableSubmit:s.disabled,onContinue:d=>t({...s,step:d}),onPrev:d=>t({...s,step:d}),onSubmit:C,children:[e.jsx(F,{form:a,setForm:x}),e.jsx(ee,{form:a,setForm:x}),e.jsx(se,{form:a,setForm:x})]})}),e.jsx(J.Login,{})]})};export{je as default};
