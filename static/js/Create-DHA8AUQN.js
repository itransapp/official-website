import{M as x,aH as b,O as j,r as m,n as e,z as l,C as d,aJ as w}from"./index-CdfQvaAC.js";import{u as g,P as v}from"./Preview-BoQOWGMP.js";import{R as y}from"./index-Bbsk-tbw.js";import{L as _,C as N}from"./ColorDot-D5Tzwhre.js";import{m as C,a as k,b as P,c as A,d as D}from"./chunk-CQCLQUUP-BNb6hrIE.js";import{s as n}from"./chunk-IXXDDLGU-BPztPuYK.js";import{i as R}from"./chunk-NNXNFLWG-CweIpbc1.js";import{s as S,l as T}from"./chunk-SWJHOPKY-wkBycqPj.js";import"./index-vUSeBrhB.js";import"./context-DKp-FRtK.js";import"./useSelectableItem-D18hGpaY.js";import"./import-Cw9Vh-pe.js";import"./index-BP6GSUqB.js";import"./chunk-BOCK7NOT-2bV4DILc.js";import"./chunk-OZXMJY32-J5zo1sif.js";import"./chunk-YOZJQNDF-XvoJ8k2K.js";import"./import-BwPBkkid.js";import"./chunk-44JHHBS2-DUtZTgkN.js";const Y=()=>{const u=x(),{labels:p}=b(),{show:c}=j(),{isOpen:h,onOpenChange:i}=g(),[a,o]=m.useState({title:"",labels:[],description:"",recaptcha:null}),f=()=>{i(),w({labels:a.labels,title:a.title,content:a.description,visible:!0,ticket:a.recaptcha||""}).then(s=>{var t,r;if(!((t=s.data)!=null&&t.status)){c({message:(r=s.data)==null?void 0:r.msg});return}window.onbeforeunload=null,window.onunload=null,u("/chalkboard")}).catch(s=>{c({message:s})})};return m.useEffect(()=>{if(!a.title&&!a.description){window.onbeforeunload=null,window.onunload=null;return}window.onbeforeunload=()=>"The content has not been saved. Are you sure you want to leave?",window.onunload=()=>"The content has not been saved. Are you sure you want to leave?"},[a.title,a.description]),e.jsxs("div",{children:[e.jsx(C,{isOpen:h,onOpenChange:i,children:e.jsx(k,{children:s=>e.jsxs(e.Fragment,{children:[e.jsx(P,{children:l("captcha")}),e.jsx(A,{className:"flex items-center justify-center",children:e.jsx(y,{onValueChange:t=>o({...a,recaptcha:t})})}),e.jsxs(D,{children:[e.jsx(d,{color:"danger",variant:"light",onPress:s,children:l("cancel")}),e.jsx(d,{color:"primary",onPress:f,isDisabled:!a.recaptcha,children:l("submit")})]})]})})}),e.jsxs("div",{className:"pl-1 pr-1 md:pl-4 md:pr-4",children:[e.jsx("span",{className:"ml-1 text-lg font-bold",children:l("pages.chalkboard.create.add_title")}),e.jsx(n,{y:2}),e.jsx(R,{isClearable:!0,className:"font-medium",variant:"bordered",labelPlacement:"outside",value:a.title,onValueChange:s=>o({...a,title:s})}),e.jsx(n,{y:2}),e.jsx("span",{className:"ml-1 text-lg font-bold",children:l("pages.chalkboard.create.add_desc")}),e.jsx(n,{y:2}),e.jsx(v,{className:"w-full max-h-screen",color:"primary",content:a.description,setContent:s=>o({...a,description:s}),classNames:{panel:"px-0"}}),e.jsxs("div",{className:"flex flex-wrap justify-between",children:[e.jsx(S,{items:p,label:l("label"),placeholder:l("pages.chalkboard.create.add_label"),labelPlacement:"inside",className:"font-medium",fullWidth:!1,selectionMode:"multiple",classNames:{value:"mt-1"},onSelectionChange:s=>{const t=[];for(const r of s)t.push(BigInt(r));o({...a,labels:t})},renderValue:s=>{const t=[];return s.map(r=>r.data?t.push({...r.data}):null),e.jsx(_,{size:"md",labels:t})},children:s=>e.jsx(T,{textValue:s.name,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(N,{color:s.color,width:"1rem",height:"1rem"}),e.jsx("div",{className:"ml-2 truncate min-w-0 flex items-center",children:e.jsx("div",{className:"font-medium",children:s.name})})]})},s.id.toString())}),e.jsx(n,{y:2}),e.jsxs("div",{className:"flex justify-between w-full flex-col md:flex-row",children:[e.jsx(d,{className:"font-medium ",color:"primary",onPress:()=>i(),isDisabled:!a.title||!a.description,children:l("pages.chalkboard.create.submit")}),e.jsx(n,{y:2}),e.jsx("div",{children:e.jsxs("p",{className:"text-sm font-medium text-transgender",children:["Remember, that your Chalkboard should adhere to the"," ",e.jsx("p",{className:"font-bold inline",children:"iTrans Community Content Guidelines"})]})})]})]})]})]})};export{Y as default};
