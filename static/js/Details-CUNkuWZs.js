import{k as y,i as R,c as k,l as e,r as m,z as x,K as F,N as Z,L as A,Y as S}from"./index-C-Prt1zy.js";import{m as g,O as D}from"./Open-Bp5o6qZH.js";import{A as M,f as P,a as z}from"./Avatar-BOOSPuXc.js";import{f as O}from"./text-BJweRK6z.js";import{e as q,f as v,g as T,d as $,b as B,c as I,m as p}from"./chunk-L6QJ42W6-rhU2cYIl.js";import{F as E,P as H}from"./Preview-jQkY4GNl.js";import{R as L,t as Q}from"./Report-Bp2oUDld.js";import{d as f}from"./chunk-44JHHBS2-CofP4Tlp.js";import{u as U,c as N,a as w,b as _}from"./chunk-BJUMDPFJ-BuTLSV8B.js";import{c as W}from"./chunk-OFH6WYRQ-BFMlG2hP.js";import{l as K}from"./chunk-MPX6TMFQ-BiFTckR-.js";import"./import-DmZ4oXrM.js";import"./index-BdgdgevS.js";import"./index-BkHgiBvb.js";import"./chunk-CAFRINWI-CcU5yOMx.js";import"./Combination-BoDDcLfA.js";import"./index-BDCPitzD.js";import"./import-FAi3ZVro.js";import"./chunk-LY2CD73K-Cqrt4fqR.js";var C=y((l,d)=>{var i;const{as:a,className:n,children:s,...r}=l,o=a||"div",u=R(d),{slots:h,classNames:t}=U(),c=k(t==null?void 0:t.footer,n);return e.jsx(o,{ref:u,className:(i=h.footer)==null?void 0:i.call(h,{class:c}),...r,children:s})});C.displayName="NextUI.CardFooter";var Y=C;const G=l=>e.jsx("svg",{"aria-hidden":"true",focusable:"false",height:"1em",role:"presentation",viewBox:"0 -960 960 960",width:"1em",className:"inline-block overflow-visible align-text-bottom fill-current",...l,children:e.jsx("path",{d:"M480-480Zm0 400q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q43 0 83 8.5t77 24.5v90q-35-20-75.5-31.5T480-800q-133 0-226.5 93.5T160-480q0 133 93.5 226.5T480-160q133 0 226.5-93.5T800-480q0-32-6.5-62T776-600h86q9 29 13.5 58.5T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm320-600v-80h-80v-80h80v-80h80v80h80v80h-80v80h-80ZM620-520q25 0 42.5-17.5T680-580q0-25-17.5-42.5T620-640q-25 0-42.5 17.5T560-580q0 25 17.5 42.5T620-520Zm-280 0q25 0 42.5-17.5T400-580q0-25-17.5-42.5T340-640q-25 0-42.5 17.5T280-580q0 25 17.5 42.5T340-520Zm140 260q68 0 123.5-38.5T684-400H276q25 63 80.5 101.5T480-260Z"})}),J=["👍","👎","😁","🎉","❤️","👀","💩"],V=({username:l,reactions:d,onReactions:i})=>{const[a,n]=m.useState(()=>{const s={};for(let r=0;r<d.length;r++)s[r]=!1;return s});return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(q,{placement:"top-start",backdrop:"opaque",radius:"sm",children:[e.jsx(v,{children:e.jsx(x,{className:"text-lg",variant:"flat",radius:"full",size:"sm",isIconOnly:!0,children:e.jsx(G,{})})}),e.jsx(T,{children:e.jsx("div",{className:"flex gap-1",children:J.map((s,r)=>e.jsx(x,{className:"inline-block text-lg",isIconOnly:!0,size:"sm",variant:"light",children:s},r))})})]}),d.map((s,r)=>{const o=s.users.indexOf(l)!==-1;return e.jsxs(q,{isOpen:a[r],onOpenChange:u=>n({...a,[r]:u}),showArrow:!0,radius:"sm",children:[e.jsx(v,{children:e.jsxs(x,{className:"text-md",variant:o?"solid":"bordered",color:o?"primary":"default",radius:"full",size:"sm",onMouseEnter:()=>n({...a,[r]:!0}),onMouseLeave:()=>n({...a,[r]:!1}),onClick:()=>{n({...a,[r]:!1}),i&&i(o,s.emoji)},children:[s.emoji," ",s.users.length]})}),e.jsx(T,{className:"text-gray-500 dark:text-gray-400",style:{maxWidth:"300px"},children:O(s.emoji,s.users)})]},r)})]})},X=l=>e.jsx("svg",{"aria-hidden":"true",focusable:"false",height:"1em",role:"presentation",viewBox:"0 -960 960 960",width:"1em",className:"inline-block overflow-visible align-text-bottom fill-current",...l,children:e.jsx("path",{d:"M240-400q-33 0-56.5-23.5T160-480q0-33 23.5-56.5T240-560q33 0 56.5 23.5T320-480q0 33-23.5 56.5T240-400Zm240 0q-33 0-56.5-23.5T400-480q0-33 23.5-56.5T480-560q33 0 56.5 23.5T560-480q0 33-23.5 56.5T480-400Zm240 0q-33 0-56.5-23.5T640-480q0-33 23.5-56.5T720-560q33 0 56.5 23.5T800-480q0 33-23.5 56.5T720-400Z"})}),ee=l=>e.jsx("svg",{"aria-hidden":"true",focusable:"false",height:"1em",role:"presentation",viewBox:"0 -960 960 960",width:"1em",className:"inline-block overflow-visible align-text-bottom fill-current",...l,children:e.jsx("path",{d:"M727-80q-47.5 0-80.75-33.346Q613-146.693 613-194.331q0-6.669 1.5-16.312T619-228L316-404q-15 17-37 27.5T234-366q-47.5 0-80.75-33.25T120-480q0-47.5 33.25-80.75T234-594q23 0 44 9t38 26l303-174q-3-7.071-4.5-15.911Q613-757.75 613-766q0-47.5 33.25-80.75T727-880q47.5 0 80.75 33.25T841-766q0 47.5-33.25 80.75T727-652q-23.354 0-44.677-7.5T646-684L343-516q2 8 3.5 18.5t1.5 17.741q0 7.242-1.5 15Q345-457 343-449l303 172q15-14 35-22.5t46-8.5q47.5 0 80.75 33.25T841-194q0 47.5-33.25 80.75T727-80Zm.035-632Q750-712 765.5-727.535q15.5-15.535 15.5-38.5T765.465-804.5q-15.535-15.5-38.5-15.5T688.5-804.465q-15.5 15.535-15.5 38.5t15.535 38.465q15.535 15.5 38.5 15.5Zm-493 286Q257-426 272.5-441.535q15.5-15.535 15.5-38.5T272.465-518.5q-15.535-15.5-38.5-15.5T195.5-518.465q-15.5 15.535-15.5 38.5t15.535 38.465q15.535 15.5 38.5 15.5Zm493 286Q750-140 765.5-155.535q15.5-15.535 15.5-38.5T765.465-232.5q-15.535-15.5-38.5-15.5T688.5-232.465q-15.5 15.535-15.5 38.5t15.535 38.465q15.535 15.5 38.5 15.5ZM727-766ZM234-480Zm493 286Z"})}),te=l=>e.jsx("svg",{"aria-hidden":"true",focusable:"false",height:"1em",role:"presentation",viewBox:"0 -960 960 960",width:"1em",className:"inline-block overflow-visible align-text-bottom fill-current",...l,children:e.jsx("path",{d:"M780-200v-156q0-60-39-99t-99-39H236l163 163-43 43-236-236 236-236 43 43-163 163h406q85 0 141.5 56.5T840-356v156h-60Z"})}),b=({cid:l,id:d,firstname:i,lastname:a,username:n,content:s,createdAt:r,followed:o,showFollow:u,onFollow:h,reactions:t})=>{const[c,j]=m.useState(!1);return e.jsxs(N,{fullWidth:!0,classNames:{base:"rounded-r-none md:rounded-r-lg rounded-l-none md:rounded-l-lg"},children:[e.jsxs(w,{className:"justify-between",children:[e.jsxs("div",{className:"flex gap-5",children:[e.jsx(M,{radius:"full",size:"md",src:`@${n}`}),e.jsxs("div",{className:"flex flex-col gap-1 items-start justify-center",children:[e.jsxs("h4",{className:"text-medium font-semibold leading-none text-default-600",children:[i," ",a]}),e.jsx(e.Fragment,{children:n?e.jsxs("h5",{className:"text-small tracking-tight text-default-400",children:["@",n]}):null})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{className:`font-medium ${u?"":"hidden"} ${o?"bg-transparent text-foreground border-default-200":""}`,color:"primary",radius:"full",size:"sm",variant:o?"bordered":"solid",onPress:h,isDisabled:!0,children:o?"Unfollow":"Follow"}),e.jsxs($,{size:"sm",children:[e.jsx(B,{children:e.jsx(x,{size:"sm",isIconOnly:!0,variant:"light",children:e.jsx(X,{width:"1.25rem",height:"1.25rem"})})}),e.jsxs(I,{"aria-label":"comment actions",disabledKeys:c?["share"]:void 0,children:[e.jsxs(g,{title:"Actions",showDivider:!0,children:[e.jsx(p,{startContent:e.jsx(ee,{width:"1.25rem",height:"1.25rem"}),onPress:()=>{navigator.clipboard.writeText(`https://itrans.app/chalkboard/${l}?${new URLSearchParams({mid:d.toString(16)})}`).then(()=>{j(!0),setTimeout(()=>{j(!1)},1500)})},children:c?"Copy Success":"Copy link"},"share"),e.jsx(p,{startContent:e.jsx(te,{width:"1.25rem",height:"1.25rem"}),children:"Reply"},"reply")]}),e.jsx(g,{title:"Feedback",children:e.jsx(p,{startContent:e.jsx(L,{width:"1.25rem",height:"1.25rem"}),color:"danger",className:"text-danger",children:"Report content"},"report")})]})]})]})]}),e.jsx(f,{}),e.jsxs(_,{children:[e.jsx(E,{className:"p-2",children:decodeURIComponent(s)}),t!=null&&t.reactions?e.jsx("div",{className:"mt-5",children:e.jsx(V,{username:t.username,reactions:t.reactions,onReactions:t.onReactions})}):null]}),e.jsx(f,{}),e.jsx(Y,{className:"gap-3",children:e.jsxs("span",{className:"text-small text-gray-500",children:["commented on ",P(r)," • edited"]})})]})},se={close:!1,id:7164271119128596480n,author:BigInt(1),username:"Z-Siqi",comments:1,title:"新加坡 Mount Elizabeth 医院的 Alex Fok 医生可以给16岁开HRT治疗",contentPreview:"Hello",labels:[{name:"内容",color:"#4feeff"},{name:"HRT",color:"#0be01f"}],createdAt:new Date,updatedAt:new Date},ae=[{cid:1n,id:1n,firstname:"Russ",lastname:"Cox",username:"official",content:'- [x] check \n ```golang \n fmt.Println("test") \n  ``` \n ```java \n System.out.println("fuck you") \n```',createdAt:new Date,reactions:{reactions:[{emoji:"👍",users:["PotatoCloud","rsc"]}],username:"PotatoCloud"},followed:!1,showFollow:!0}],Ne=()=>{const l=F(),d=Z(),{show:i}=A(),[a,n]=m.useState({author:0n,close:!1,comments:0,content:"",createdAt:new Date,firstname:"",labels:[],lastname:"",reactions:[],title:"",updatedAt:new Date,username:""}),[s,r]=m.useState(0n),[o,u]=m.useState({description:"",recaptcha:null}),h=m.useCallback(t=>{u(c=>({...c,description:t}))},[]);return m.useEffect(()=>{const t=d.id;if(!t){l("/chalkboard");return}const c=Q(t);if(!c){l("/chalkboard");return}r(c)},[d]),m.useEffect(()=>{s&&S({id:s}).then(t=>{if(!t.data){i({message:"Failed to fetch chalkboard details"});return}if(!t.data.status||!t.data.data){i({message:t.data.msg});return}n(t.data.data)}).catch(t=>{i({message:t})})},[s]),e.jsxs("div",{className:"md:w-10/12 ml-auto mr-auto mt-8",children:[e.jsxs("div",{className:"block w-full",children:[e.jsxs("h1",{className:"text-3xl",children:[e.jsx("bdi",{className:"break-words tracking-tight",children:a.title}),e.jsx("span",{className:"text-2xl text-gray-500",children:` #${s.toString(16).slice(0,8)}`})]}),e.jsx("div",{className:"flex mt-2 items-center",children:e.jsxs(e.Fragment,{children:[e.jsx(W,{startContent:e.jsx(D,{height:"2em",width:"2em",style:{marginTop:"0.5rem",fill:"#FFFFFF"}}),className:"text-white pl-2",classNames:{content:"pl-0"},variant:"solid",color:"success",children:e.jsx("p",{className:"text-large font-medium",children:"Open"})}),e.jsxs("div",{className:"inline ml-2 text-gray-500 text-small",children:[e.jsx(K,{size:"sm",href:`/user/${a.username}`,className:"mr-1 font-medium text-medium text-gray-500",children:`@${a.username}`}),"opened this chalkboard on ",z(se.createdAt)," · ",a.comments," comments"]})]})})]}),e.jsx(f,{className:"mt-5 mb-5"}),e.jsx("div",{className:"flex gap-10",children:e.jsxs("div",{className:"w-full space-y-4",children:[e.jsx(b,{cid:s,id:0n,firstname:a.firstname,lastname:a.lastname,username:a.username||"",content:a.content,createdAt:a.createdAt,reactions:{username:"",reactions:a.reactions}}),ae.map((t,c)=>e.jsx(b,{...t,cid:s},c)),e.jsx(f,{className:"mt-5 mb-5"}),e.jsxs(N,{fullWidth:!0,children:[e.jsx(w,{children:e.jsx("span",{className:"font-medium",children:"Add a comment"})}),e.jsx(_,{children:e.jsx(H,{className:"w-full max-h-screen",color:"primary",content:o.description,setContent:h,classNames:{panel:"px-0"},minRows:5,maxRows:15})})]})]})})]})};export{Ne as default};
