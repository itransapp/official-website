import{r as h,a0 as ce,aC as ie,aH as ae,ac as Y,aI as ue,aJ as X,e as se,aD as fe,aB as de,aK as he,aL as j,aM as G,ar as ye,aN as ge,au as pe,aO as Ke,aP as J,aQ as me,T as V,q as be}from"./index-Cdk21UJT.js";function H(s){return ge()?s.altKey:s.ctrlKey}function L(s){return pe()?s.metaKey:s.ctrlKey}const ve=1e3;function $e(s){let{keyboardDelegate:e,selectionManager:t,onTypeSelect:l}=s,i=h.useRef({search:"",timeout:null}).current,n=r=>{let u=Se(r.key);if(!u||r.ctrlKey||r.metaKey||!r.currentTarget.contains(r.target))return;u===" "&&i.search.trim().length>0&&(r.preventDefault(),"continuePropagation"in r||r.stopPropagation()),i.search+=u;let a=e.getKeyForSearch(i.search,t.focusedKey);a==null&&(a=e.getKeyForSearch(i.search)),a!=null&&(t.setFocusedKey(a),l&&l(a)),clearTimeout(i.timeout),i.timeout=setTimeout(()=>{i.search=""},ve)};return{typeSelectProps:{onKeyDownCapture:e.getKeyForSearch?n:null}}}function Se(s){return s.length===1||!/^[A-Z]/i.test(s)?s:""}function we(s){let{selectionManager:e,keyboardDelegate:t,ref:l,autoFocus:i=!1,shouldFocusWrap:n=!1,disallowEmptySelection:r=!1,disallowSelectAll:u=!1,selectOnFocus:a=e.selectionBehavior==="replace",disallowTypeAhead:p=!1,shouldUseVirtualFocus:m,allowsTabNavigation:$=!1,isVirtualized:y,scrollRef:d=l,linkBehavior:D="action"}=s,{direction:w}=ce(),g=ie(),C=o=>{if(o.altKey&&o.key==="Tab"&&o.preventDefault(),!l.current.contains(o.target))return;const K=(f,R)=>{if(f!=null){if(e.isLink(f)&&D==="selection"&&a&&!H(o)){me.flushSync(()=>{e.setFocusedKey(f,R)});let O=d.current.querySelector(`[data-key="${CSS.escape(f.toString())}"]`);g.open(O,o);return}if(e.setFocusedKey(f,R),e.isLink(f)&&D==="override")return;o.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(f):a&&!H(o)&&e.replaceSelection(f)}};switch(o.key){case"ArrowDown":if(t.getKeyBelow){var x,S;o.preventDefault();let f=e.focusedKey!=null?t.getKeyBelow(e.focusedKey):(x=t.getFirstKey)===null||x===void 0?void 0:x.call(t);f==null&&n&&(f=(S=t.getFirstKey)===null||S===void 0?void 0:S.call(t,e.focusedKey)),K(f)}break;case"ArrowUp":if(t.getKeyAbove){var P,A;o.preventDefault();let f=e.focusedKey!=null?t.getKeyAbove(e.focusedKey):(P=t.getLastKey)===null||P===void 0?void 0:P.call(t);f==null&&n&&(f=(A=t.getLastKey)===null||A===void 0?void 0:A.call(t,e.focusedKey)),K(f)}break;case"ArrowLeft":if(t.getKeyLeftOf){var z,c;o.preventDefault();let f=t.getKeyLeftOf(e.focusedKey);f==null&&n&&(f=w==="rtl"?(z=t.getFirstKey)===null||z===void 0?void 0:z.call(t,e.focusedKey):(c=t.getLastKey)===null||c===void 0?void 0:c.call(t,e.focusedKey)),K(f,w==="rtl"?"first":"last")}break;case"ArrowRight":if(t.getKeyRightOf){var k,W;o.preventDefault();let f=t.getKeyRightOf(e.focusedKey);f==null&&n&&(f=w==="rtl"?(k=t.getLastKey)===null||k===void 0?void 0:k.call(t,e.focusedKey):(W=t.getFirstKey)===null||W===void 0?void 0:W.call(t,e.focusedKey)),K(f,w==="rtl"?"last":"first")}break;case"Home":if(t.getFirstKey){o.preventDefault();let f=t.getFirstKey(e.focusedKey,L(o));e.setFocusedKey(f),L(o)&&o.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(f):a&&e.replaceSelection(f)}break;case"End":if(t.getLastKey){o.preventDefault();let f=t.getLastKey(e.focusedKey,L(o));e.setFocusedKey(f),L(o)&&o.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(f):a&&e.replaceSelection(f)}break;case"PageDown":if(t.getKeyPageBelow){o.preventDefault();let f=t.getKeyPageBelow(e.focusedKey);K(f)}break;case"PageUp":if(t.getKeyPageAbove){o.preventDefault();let f=t.getKeyPageAbove(e.focusedKey);K(f)}break;case"a":L(o)&&e.selectionMode==="multiple"&&u!==!0&&(o.preventDefault(),e.selectAll());break;case"Escape":o.preventDefault(),r||e.clearSelection();break;case"Tab":if(!$){if(o.shiftKey)l.current.focus();else{let f=Ke(l.current,{tabbable:!0}),R,O;do O=f.lastChild(),O&&(R=O);while(O);R&&!R.contains(document.activeElement)&&J(R)}break}}},b=h.useRef({top:0,left:0});ae(d,"scroll",y?null:()=>{b.current={top:d.current.scrollTop,left:d.current.scrollLeft}});let v=o=>{if(e.isFocused){o.currentTarget.contains(o.target)||e.setFocused(!1);return}if(o.currentTarget.contains(o.target)){if(e.setFocused(!0),e.focusedKey==null){let S=A=>{A!=null&&(e.setFocusedKey(A),a&&e.replaceSelection(A))},P=o.relatedTarget;var K,x;P&&o.currentTarget.compareDocumentPosition(P)&Node.DOCUMENT_POSITION_FOLLOWING?S((K=e.lastSelectedKey)!==null&&K!==void 0?K:t.getLastKey()):S((x=e.firstSelectedKey)!==null&&x!==void 0?x:t.getFirstKey())}else y||(d.current.scrollTop=b.current.top,d.current.scrollLeft=b.current.left);if(!y&&e.focusedKey!=null){let S=d.current.querySelector(`[data-key="${CSS.escape(e.focusedKey.toString())}"]`);S&&(S.contains(document.activeElement)||J(S),G()==="keyboard"&&X(S,{containingElement:l.current}))}}},I=o=>{o.currentTarget.contains(o.relatedTarget)||e.setFocused(!1)};const B=h.useRef(i);h.useEffect(()=>{if(B.current){let o=null;i==="first"&&(o=t.getFirstKey()),i==="last"&&(o=t.getLastKey());let K=e.selectedKeys;if(K.size){for(let x of K)if(e.canSelectItem(x)){o=x;break}}e.setFocused(!0),e.setFocusedKey(o),o==null&&!m&&Y(l.current)}},[]);let T=h.useRef(e.focusedKey);h.useEffect(()=>{let o=G();if(e.isFocused&&e.focusedKey!=null&&(d!=null&&d.current)){let K=d.current.querySelector(`[data-key="${CSS.escape(e.focusedKey.toString())}"]`);K&&(o==="keyboard"||B.current)&&(y||ue(d.current,K),X(K,{containingElement:l.current}))}e.isFocused&&e.focusedKey==null&&T.current!=null&&Y(l.current),T.current=e.focusedKey,B.current=!1},[y,d,e.focusedKey,e.isFocused,l]);let M={onKeyDown:C,onFocus:v,onBlur:I,onMouseDown(o){d.current===o.target&&o.preventDefault()}},{typeSelectProps:U}=$e({keyboardDelegate:t,selectionManager:e});p||(M=se(U,M));let E;return m||(E=e.focusedKey==null?0:-1),{collectionProps:{...M,tabIndex:E}}}function Te(s){let{selectionManager:e,key:t,ref:l,shouldSelectOnPressUp:i,shouldUseVirtualFocus:n,focus:r,isDisabled:u,onAction:a,allowsDifferentPressOrigin:p,linkBehavior:m="action"}=s,$=ie(),y=c=>{if(c.pointerType==="keyboard"&&H(c))e.toggleSelection(t);else{if(e.selectionMode==="none")return;if(e.isLink(t)){if(m==="selection"){$.open(l.current,c),e.setSelectedKeys(e.selectedKeys);return}else if(m==="override"||m==="none")return}e.selectionMode==="single"?e.isSelected(t)&&!e.disallowEmptySelection?e.toggleSelection(t):e.replaceSelection(t):c&&c.shiftKey?e.extendSelection(t):e.selectionBehavior==="toggle"||c&&(L(c)||c.pointerType==="touch"||c.pointerType==="virtual")?e.toggleSelection(t):e.replaceSelection(t)}};h.useEffect(()=>{t===e.focusedKey&&e.isFocused&&!n&&(r?r():document.activeElement!==l.current&&Y(l.current))},[l,t,e.focusedKey,e.childFocusStrategy,e.isFocused,n]),u=u||e.isDisabled(t);let d={};!n&&!u?d={tabIndex:t===e.focusedKey?0:-1,onFocus(c){c.target===l.current&&e.setFocusedKey(t)}}:u&&(d.onMouseDown=c=>{c.preventDefault()});let D=e.isLink(t)&&m==="override",w=e.isLink(t)&&m!=="selection"&&m!=="none",g=!u&&e.canSelectItem(t)&&!D,C=(a||w)&&!u,b=C&&(e.selectionBehavior==="replace"?!g:!g||e.isEmpty),v=C&&g&&e.selectionBehavior==="replace",I=b||v,B=h.useRef(null),T=I&&g,M=h.useRef(!1),U=h.useRef(!1),E=c=>{a&&a(),w&&$.open(l.current,c)},o={};i?(o.onPressStart=c=>{B.current=c.pointerType,M.current=T,c.pointerType==="keyboard"&&(!I||Z())&&y(c)},p?(o.onPressUp=b?null:c=>{c.pointerType!=="keyboard"&&g&&y(c)},o.onPress=b?E:null):o.onPress=c=>{if(b||v&&c.pointerType!=="mouse"){if(c.pointerType==="keyboard"&&!Q())return;E(c)}else c.pointerType!=="keyboard"&&g&&y(c)}):(o.onPressStart=c=>{B.current=c.pointerType,M.current=T,U.current=b,g&&(c.pointerType==="mouse"&&!b||c.pointerType==="keyboard"&&(!C||Z()))&&y(c)},o.onPress=c=>{(c.pointerType==="touch"||c.pointerType==="pen"||c.pointerType==="virtual"||c.pointerType==="keyboard"&&I&&Q()||c.pointerType==="mouse"&&U.current)&&(I?E(c):g&&y(c))}),d["data-key"]=t,o.preventFocusOnPress=n;let{pressProps:K,isPressed:x}=fe(o),S=v?c=>{B.current==="mouse"&&(c.stopPropagation(),c.preventDefault(),E(c))}:void 0,{longPressProps:P}=de({isDisabled:!T,onLongPress(c){c.pointerType==="touch"&&(y(c),e.setSelectionBehavior("toggle"))}}),A=c=>{B.current==="touch"&&M.current&&c.preventDefault()},z=e.isLink(t)?c=>{he.isOpening||c.preventDefault()}:void 0;return{itemProps:se(d,g||b?K:{},T?P:{},{onDoubleClick:S,onDragStartCapture:A,onClick:z}),isPressed:x,isSelected:e.isSelected(t),isFocused:e.isFocused&&e.focusedKey===t,isDisabled:u,allowsSelection:g,hasAction:I}}function Q(){let s=window.event;return(s==null?void 0:s.key)==="Enter"}function Z(){let s=window.event;return(s==null?void 0:s.key)===" "||(s==null?void 0:s.code)==="Space"}class xe{getNextKey(e){for(e=this.collection.getKeyAfter(e);e!=null;){if(this.collection.getItem(e).type==="item"&&!this.disabledKeys.has(e))return e;e=this.collection.getKeyAfter(e)}return null}getPreviousKey(e){for(e=this.collection.getKeyBefore(e);e!=null;){if(this.collection.getItem(e).type==="item"&&!this.disabledKeys.has(e))return e;e=this.collection.getKeyBefore(e)}return null}findKey(e,t,l){let i=this.getItem(e);if(!i)return null;let n=i.getBoundingClientRect();do e=t(e),i=this.getItem(e);while(i&&l(n,i.getBoundingClientRect()));return e}isSameRow(e,t){return e.top===t.top||e.left!==t.left}isSameColumn(e,t){return e.left===t.left||e.top!==t.top}getKeyBelow(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,t=>this.getNextKey(t),this.isSameRow):this.getNextKey(e)}getKeyAbove(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,t=>this.getPreviousKey(t),this.isSameRow):this.getPreviousKey(e)}getNextColumn(e,t){return t?this.getPreviousKey(e):this.getNextKey(e)}getKeyRightOf(e){return this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="rtl"):this.findKey(e,t=>this.getNextColumn(t,this.direction==="rtl"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="rtl"):null}getKeyLeftOf(e){return this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="ltr"):this.findKey(e,t=>this.getNextColumn(t,this.direction==="ltr"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="ltr"):null}getFirstKey(){let e=this.collection.getFirstKey();for(;e!=null;){if(this.collection.getItem(e).type==="item"&&!this.disabledKeys.has(e))return e;e=this.collection.getKeyAfter(e)}return null}getLastKey(){let e=this.collection.getLastKey();for(;e!=null;){if(this.collection.getItem(e).type==="item"&&!this.disabledKeys.has(e))return e;e=this.collection.getKeyBefore(e)}return null}getItem(e){return this.ref.current.querySelector(`[data-key="${CSS.escape(e.toString())}"]`)}getKeyPageAbove(e){let t=this.ref.current,l=this.getItem(e);if(!l)return null;if(!j(t))return this.getFirstKey();let i=t.getBoundingClientRect(),n=l.getBoundingClientRect();if(this.orientation==="horizontal"){let r=i.x-t.scrollLeft,u=Math.max(0,n.x-r+n.width-i.width);for(;l&&n.x-r>u;)e=this.getKeyAbove(e),l=e==null?null:this.getItem(e),n=l==null?void 0:l.getBoundingClientRect()}else{let r=i.y-t.scrollTop,u=Math.max(0,n.y-r+n.height-i.height);for(;l&&n.y-r>u;)e=this.getKeyAbove(e),l=e==null?null:this.getItem(e),n=l==null?void 0:l.getBoundingClientRect()}return e??this.getFirstKey()}getKeyPageBelow(e){let t=this.ref.current,l=this.getItem(e);if(!l)return null;if(!j(t))return this.getLastKey();let i=t.getBoundingClientRect(),n=l.getBoundingClientRect();if(this.orientation==="horizontal"){let r=i.x-t.scrollLeft,u=Math.min(t.scrollWidth,n.x-r-n.width+i.width);for(;l&&n.x-r<u;)e=this.getKeyBelow(e),l=e==null?null:this.getItem(e),n=l==null?void 0:l.getBoundingClientRect()}else{let r=i.y-t.scrollTop,u=Math.min(t.scrollHeight,n.y-r-n.height+i.height);for(;l&&n.y-r<u;)e=this.getKeyBelow(e),l=e==null?null:this.getItem(e),n=l==null?void 0:l.getBoundingClientRect()}return e??this.getLastKey()}getKeyForSearch(e,t){if(!this.collator)return null;let l=this.collection,i=t||this.getFirstKey();for(;i!=null;){let n=l.getItem(i),r=n.textValue.slice(0,e.length);if(n.textValue&&this.collator.compare(r,e)===0)return i;i=this.getKeyBelow(i)}return null}constructor(...e){if(e.length===1){let t=e[0];this.collection=t.collection,this.ref=t.ref,this.collator=t.collator,this.disabledKeys=t.disabledKeys||new Set,this.orientation=t.orientation,this.direction=t.direction,this.layout=t.layout||"stack"}else this.collection=e[0],this.disabledKeys=e[1],this.ref=e[2],this.collator=e[3],this.layout="stack",this.orientation="vertical";this.layout==="stack"&&this.orientation==="vertical"&&(this.getKeyLeftOf=void 0,this.getKeyRightOf=void 0)}}function Me(s){let{selectionManager:e,collection:t,disabledKeys:l,ref:i,keyboardDelegate:n}=s,r=ye({usage:"search",sensitivity:"base"}),u=e.disabledBehavior,a=h.useMemo(()=>n||new xe(t,u==="selection"?new Set:l,i,r),[n,t,l,i,r,u]),{collectionProps:p}=we({...s,ref:i,selectionManager:e,keyboardDelegate:a});return{listProps:p}}function ne(s){return null}ne.getCollectionNode=function*(e,t){let{childItems:l,title:i,children:n}=e,r=e.title||e.children,u=e.textValue||(typeof r=="string"?r:"")||e["aria-label"]||"";!u&&!(t!=null&&t.suppressTextValueWarning)&&console.warn("<Item> with non-plain text contents is unsupported by type to select for accessibility. Please add a `textValue` prop."),yield{type:"item",props:e,rendered:r,textValue:u,"aria-label":e["aria-label"],hasChildNodes:Fe(e),*childNodes(){if(l)for(let a of l)yield{type:"item",value:a};else if(i){let a=[];V.Children.forEach(n,p=>{a.push({type:"item",element:p})}),yield*a}}}};function Fe(s){return s.hasChildItems!=null?s.hasChildItems:!!(s.childItems||s.title&&V.Children.count(s.children)>0)}let Ee=ne;function re(s){return null}re.getCollectionNode=function*(e){let{children:t,title:l,items:i}=e;yield{type:"section",props:e,hasChildNodes:!0,rendered:l,"aria-label":e["aria-label"],*childNodes(){if(typeof t=="function"){if(!i)throw new Error("props.children was a function but props.items is missing");for(let n of i)yield{type:"item",value:n,renderer:t}}else{let n=[];V.Children.forEach(t,r=>{n.push({type:"item",element:r})}),yield*n}}}};let Re=re;class Ce{build(e,t){return this.context=t,_(()=>this.iterateCollection(e))}*iterateCollection(e){let{children:t,items:l}=e;if(typeof t=="function"){if(!l)throw new Error("props.children was a function but props.items is missing");for(let i of e.items)yield*this.getFullNode({value:i},{renderer:t})}else{let i=[];V.Children.forEach(t,r=>{i.push(r)});let n=0;for(let r of i){let u=this.getFullNode({element:r,index:n},{});for(let a of u)n++,yield a}}}getKey(e,t,l,i){if(e.key!=null)return e.key;if(t.type==="cell"&&t.key!=null)return`${i}${t.key}`;let n=t.value;if(n!=null){var r;let u=(r=n.key)!==null&&r!==void 0?r:n.id;if(u==null)throw new Error("No key found for item");return u}return i?`${i}.${t.index}`:`$.${t.index}`}getChildState(e,t){return{renderer:t.renderer||e.renderer}}*getFullNode(e,t,l,i){let n=e.element;if(!n&&e.value&&t&&t.renderer){let a=this.cache.get(e.value);if(a&&(!a.shouldInvalidate||!a.shouldInvalidate(this.context))){a.index=e.index,a.parentKey=i?i.key:null,yield a;return}n=t.renderer(e.value)}if(V.isValidElement(n)){let a=n.type;if(typeof a!="function"&&typeof a.getCollectionNode!="function"){let y=typeof n.type=="function"?n.type.name:n.type;throw new Error(`Unknown element <${y}> in collection.`)}let p=a.getCollectionNode(n.props,this.context),m=e.index,$=p.next();for(;!$.done&&$.value;){let y=$.value;e.index=m;let d=y.key;d||(d=y.element?null:this.getKey(n,e,t,l));let w=[...this.getFullNode({...y,key:d,index:m,wrapper:Ie(e.wrapper,y.wrapper)},this.getChildState(t,y),l?`${l}${n.key}`:n.key,i)];for(let g of w){if(g.value=y.value||e.value,g.value&&this.cache.set(g.value,g),e.type&&g.type!==e.type)throw new Error(`Unsupported type <${q(g.type)}> in <${q(i.type)}>. Only <${q(e.type)}> is supported.`);m++,yield g}$=p.next(w)}return}if(e.key==null)return;let r=this,u={type:e.type,props:e.props,key:e.key,parentKey:i?i.key:null,value:e.value,level:i?i.level+1:0,index:e.index,rendered:e.rendered,textValue:e.textValue,"aria-label":e["aria-label"],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes,childNodes:_(function*(){if(!e.hasChildNodes)return;let a=0;for(let p of e.childNodes()){p.key!=null&&(p.key=`${u.key}${p.key}`),p.index=a;let m=r.getFullNode(p,r.getChildState(t,p),u.key,u);for(let $ of m)a++,yield $}})};yield u}constructor(){this.cache=new WeakMap}}function _(s){let e=[],t=null;return{*[Symbol.iterator](){for(let l of e)yield l;t||(t=s());for(let l of t)e.push(l),yield l}}}function Ie(s,e){if(s&&e)return t=>s(e(t));if(s)return s;if(e)return e}function q(s){return s[0].toUpperCase()+s.slice(1)}function Oe(s,e,t){let l=h.useMemo(()=>new Ce,[]),{children:i,items:n,collection:r}=s;return h.useMemo(()=>{if(r)return r;let a=l.build({children:i,items:n},t);return e(a)},[l,i,n,r,t,e])}function oe(s,e){return typeof e.getChildren=="function"?e.getChildren(s.key):s.childNodes}function Pe(s){return Ae(s,0)}function Ae(s,e){if(e<0)return;let t=0;for(let l of s){if(t===e)return l;t++}}function N(s,e,t){if(e.parentKey===t.parentKey)return e.index-t.index;let l=[...ee(s,e),e],i=[...ee(s,t),t],n=l.slice(0,i.length).findIndex((r,u)=>r!==i[u]);return n!==-1?(e=l[n],t=i[n],e.index-t.index):l.findIndex(r=>r===t)>=0?1:(i.findIndex(r=>r===e)>=0,-1)}function ee(s,e){let t=[];for(;(e==null?void 0:e.parentKey)!=null;)e=s.getItem(e.parentKey),t.unshift(e);return t}const te=new WeakMap;function Le(s){let e=te.get(s);if(e!=null)return e;e=0;let t=l=>{for(let i of l)i.type==="section"?t(oe(i,s)):e++};return t(s),te.set(s,e),e}class F extends Set{constructor(e,t,l){super(e),e instanceof F?(this.anchorKey=t||e.anchorKey,this.currentKey=l||e.currentKey):(this.anchorKey=t,this.currentKey=l)}}function Be(s,e){if(s.size!==e.size)return!1;for(let t of s)if(!e.has(t))return!1;return!0}function ze(s){let{selectionMode:e="none",disallowEmptySelection:t,allowDuplicateSelectionEvents:l,selectionBehavior:i="toggle",disabledBehavior:n="all"}=s,r=h.useRef(!1),[,u]=h.useState(!1),a=h.useRef(null),p=h.useRef(null),[,m]=h.useState(null),$=h.useMemo(()=>le(s.selectedKeys),[s.selectedKeys]),y=h.useMemo(()=>le(s.defaultSelectedKeys,new F),[s.defaultSelectedKeys]),[d,D]=be($,y,s.onSelectionChange),w=h.useMemo(()=>s.disabledKeys?new Set(s.disabledKeys):new Set,[s.disabledKeys]),[g,C]=h.useState(i);i==="replace"&&g==="toggle"&&typeof d=="object"&&d.size===0&&C("replace");let b=h.useRef(i);return h.useEffect(()=>{i!==b.current&&(C(i),b.current=i)},[i]),{selectionMode:e,disallowEmptySelection:t,selectionBehavior:g,setSelectionBehavior:C,get isFocused(){return r.current},setFocused(v){r.current=v,u(v)},get focusedKey(){return a.current},get childFocusStrategy(){return p.current},setFocusedKey(v,I="first"){a.current=v,p.current=I,m(v)},selectedKeys:d,setSelectedKeys(v){(l||!Be(v,d))&&D(v)},disabledKeys:w,disabledBehavior:n}}function le(s,e){return s?s==="all"?"all":new F(s):e}class Ve{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}get isFocused(){return this.state.isFocused}setFocused(e){this.state.setFocused(e)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(e,t){(e==null||this.collection.getItem(e))&&this.state.setFocusedKey(e,t)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(e){return this.state.selectionMode==="none"?!1:(e=this.getKey(e),this.state.selectedKeys==="all"?this.canSelectItem(e):this.state.selectedKeys.has(e))}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let e=this.getSelectAllKeys(),t=this.state.selectedKeys;return this._isSelectAll=e.every(l=>t.has(l)),this._isSelectAll}get firstSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let l=this.collection.getItem(t);(!e||l&&N(this.collection,l,e)<0)&&(e=l)}return e==null?void 0:e.key}get lastSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let l=this.collection.getItem(t);(!e||l&&N(this.collection,l,e)>0)&&(e=l)}return e==null?void 0:e.key}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(e);return}e=this.getKey(e);let t;if(this.state.selectedKeys==="all")t=new F([e],e,e);else{let l=this.state.selectedKeys,i=l.anchorKey||e;t=new F(l,i,e);for(let n of this.getKeyRange(i,l.currentKey||e))t.delete(n);for(let n of this.getKeyRange(e,i))this.canSelectItem(n)&&t.add(n)}this.state.setSelectedKeys(t)}getKeyRange(e,t){let l=this.collection.getItem(e),i=this.collection.getItem(t);return l&&i?N(this.collection,l,i)<=0?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){let l=[],i=e;for(;i;){let n=this.collection.getItem(i);if((n&&n.type==="item"||n.type==="cell"&&this.allowsCellSelection)&&l.push(i),i===t)return l;i=this.collection.getKeyAfter(i)}return[]}getKey(e){let t=this.collection.getItem(e);if(!t||t.type==="cell"&&this.allowsCellSelection)return e;for(;t.type!=="item"&&t.parentKey!=null;)t=this.collection.getItem(t.parentKey);return!t||t.type!=="item"?null:t.key}toggleSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}if(e=this.getKey(e),e==null)return;let t=new F(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);t.has(e)?t.delete(e):this.canSelectItem(e)&&(t.add(e),t.anchorKey=e,t.currentKey=e),!(this.disallowEmptySelection&&t.size===0)&&this.state.setSelectedKeys(t)}replaceSelection(e){if(this.selectionMode==="none"||(e=this.getKey(e),e==null))return;let t=this.canSelectItem(e)?new F([e],e,e):new F;this.state.setSelectedKeys(t)}setSelectedKeys(e){if(this.selectionMode==="none")return;let t=new F;for(let l of e)if(l=this.getKey(l),l!=null&&(t.add(l),this.selectionMode==="single"))break;this.state.setSelectedKeys(t)}getSelectAllKeys(){let e=[],t=l=>{for(;l;){if(this.canSelectItem(l)){let i=this.collection.getItem(l);i.type==="item"&&e.push(l),i.hasChildNodes&&(this.allowsCellSelection||i.type!=="item")&&t(Pe(oe(i,this.collection)).key)}l=this.collection.getKeyAfter(l)}};return t(this.collection.getFirstKey()),e}selectAll(){!this.isSelectAll&&this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new F)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(e)&&!this.disallowEmptySelection?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior==="toggle"||t&&(t.pointerType==="touch"||t.pointerType==="virtual")?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys)return!0;let t=this.selectedKeys;if(e.size!==t.size)return!1;for(let l of e)if(!t.has(l))return!1;for(let l of t)if(!e.has(l))return!1;return!0}canSelectItem(e){if(this.state.selectionMode==="none"||this.state.disabledKeys.has(e))return!1;let t=this.collection.getItem(e);return!(!t||t.type==="cell"&&!this.allowsCellSelection)}isDisabled(e){return this.state.disabledKeys.has(e)&&this.state.disabledBehavior==="all"}isLink(e){var t,l;return!!(!((l=this.collection.getItem(e))===null||l===void 0||(t=l.props)===null||t===void 0)&&t.href)}constructor(e,t,l){this.collection=e,this.state=t;var i;this.allowsCellSelection=(i=l==null?void 0:l.allowsCellSelection)!==null&&i!==void 0?i:!1,this._isSelectAll=null}}export{Re as $,ze as a,Oe as b,Ve as c,Ee as d,Te as e,we as f,xe as g,$e as h,Me as i,Le as j};
