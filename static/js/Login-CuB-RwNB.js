import{l as e,r as u,L as y,K as N,J as C,y as P,z as p,M as x,an as j,ao as z,ap as L}from"./index-C-Prt1zy.js";import{L as A,F}from"./index-4i9x7LO4.js";import{P as H,c as M}from"./Password-C3dpdFpn.js";import{R as S}from"./index-DwuLFNjh.js";import{l}from"./chunk-MPX6TMFQ-BiFTckR-.js";import{i as V}from"./chunk-TC4QW7OA-CoWQUZMs.js";import{s as _}from"./chunk-KRADFROI-pCWXqkOn.js";import"./index-BdgdgevS.js";import"./index-BkHgiBvb.js";import"./chunk-OFGZKCFR-DclXQmpx.js";import"./chunk-CAFRINWI-CcU5yOMx.js";import"./chunk-LY2CD73K-Cqrt4fqR.js";const E=a=>e.jsxs("svg",{height:"1em",width:"1em",viewBox:"0 0 48 48",...a,children:[e.jsx("defs",{children:e.jsx("path",{id:"a",d:"M44.5 20H24v8.5h11.8C34.7 33.9 30.1 37 24 37c-7.2 0-13-5.8-13-13s5.8-13 13-13c3.1 0 5.9 1.1 8.1 2.9l6.4-6.4C34.6 4.1 29.6 2 24 2 11.8 2 2 11.8 2 24s9.8 22 22 22c11 0 21-8 21-22 0-1.3-.2-2.7-.5-4z"})}),e.jsx("clipPath",{id:"b",children:e.jsx("use",{xlinkHref:"#a",overflow:"visible"})}),e.jsx("path",{clipPath:"url(#b)",fill:"#FBBC05",d:"M0 37V11l17 13z"}),e.jsx("path",{clipPath:"url(#b)",fill:"#EA4335",d:"M0 11l17 13 7-6.1L48 14V0H0z"}),e.jsx("path",{clipPath:"url(#b)",fill:"#34A853",d:"M0 37l30-23 7.9 1L48 0v48H0z"}),e.jsx("path",{clipPath:"url(#b)",fill:"#4285F4",d:"M48 48L17 24l-4-3 35-10z"})]}),O=()=>{const[a,r]=u.useState({certificate:"",password:"",recaptcha:"",remember:!1}),{show:i}=y(),c=N(),{authed:g,update:v}=C(),b=P();u.useEffect(()=>{if(g()){c("/");return}},[]);const w=()=>{if(!x(a.certificate)&&!j(a.certificate)||!a.password||!a.recaptcha){i({message:"Invalid form input"});return}z({email:j(a.certificate)?a.certificate:void 0,username:x(a.certificate)?a.certificate:void 0,password:a.password,ticket:a.recaptcha}).then(t=>{var o,d,n,m;if(!((o=t.data)!=null&&o.status)){i({message:(d=t.data)==null?void 0:d.msg});return}v({ticket:(n=t.data.data)==null?void 0:n.ticket,expire:(m=t.data.data)==null?void 0:m.expire}),L().then(s=>{var f,h;!((f=s.data)!=null&&f.data)||!((h=s.data)!=null&&h.status)||b.set({...s.data.data.profile,recentActivity:s.data.data.recentActivity})}).catch(s=>{i({message:s.toString()})}),c("/")}).catch(t=>{i({message:t.toString()})})};return e.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 mx-auto h-screen lg:py-0",children:[e.jsx(l,{href:"/",children:e.jsx(A,{className:"select-none",width:200,loading:"lazy"})}),e.jsx("div",{className:"w-full mt-6 sm:max-w-md xl:p-0",children:e.jsxs("div",{className:"p-2",children:[e.jsxs("form",{className:"space-y-4 md:space-y-6",action:"#",children:[e.jsx("div",{children:e.jsx(V,{isClearable:!0,className:"font-medium",type:"email",labelPlacement:"outside",label:"Username or email address",variant:"bordered",placeholder:" ",value:a.certificate,onValueChange:t=>{r({...a,certificate:t})},onClear:()=>{r({...a,certificate:""})}})}),e.jsx(_,{y:4}),e.jsx("div",{children:e.jsx(H,{className:"font-medium",labelPlacement:"outside",label:"Password",variant:"bordered",placeholder:" ",value:a.password,onValueChange:t=>{r({...a,password:t})}})}),e.jsx("div",{className:"w-full flex justify-center",children:e.jsx(S,{onValueChange:t=>{r({...a,recaptcha:t})}})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-start",children:e.jsx(M,{isSelected:a.remember,onValueChange:t=>{r({...a,remember:t})},children:"Remember me"})}),e.jsx(l,{isDisabled:!0,className:"font-medium",href:"/forgot_password",children:"Forgot password?"})]}),e.jsx(p,{className:"font-bold",color:"primary",fullWidth:!0,size:"lg",onClick:w,children:"Sign in"}),e.jsxs("p",{className:"text-sm font-light text-gray-500 dark:text-gray-400",children:["Donâ€™t have an account yet? ",e.jsx(l,{className:"font-medium",size:"sm",href:"/signup",children:"Sign up!"})]})]}),e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(p,{color:"secondary",startContent:e.jsx(E,{height:"1.5rem",width:"1.5rem"}),variant:"bordered",className:"font-medium",fullWidth:!0,children:"Continue with Google"})})]})}),e.jsx(F.Login,{})]})};export{O as default};
