import{l as e,R as v,O as w,P as N,r as f,z as c}from"./index-SefhKHxc.js";import{O as k}from"./Open-DzahjnH6.js";import{c as _,a as p}from"./date-DY1LqyFU.js";import{l as m}from"./chunk-MPX6TMFQ-BZOmTlxZ.js";import{a as $}from"./chunk-LSZJW3GU-CwfHPeMU.js";import{o as y}from"./index.module-BzKcMzaG.js";import{$ as A}from"./import-BPLxfanT.js";import{d as x,a as b,b as j,m as g}from"./chunk-L6QJ42W6-Bg8n833X.js";import{i as B}from"./chunk-TC4QW7OA-DPwKje3s.js";import"./chunk-M3MASYO7-DZGxqI2D.js";import"./chunk-CAFRINWI-CcU5yOMx.js";import"./index-B1Is-NpF.js";import"./index-CfGXn9Zk.js";import"./import-BO87NtfQ.js";import"./Combination-hkZBA2qH.js";import"./chunk-3YBC73XM-z9ZRaA5D.js";import"./import-SNGOe1Jp.js";import"./chunk-44JHHBS2-DSSqIrcP.js";var H=A,T=H;const M=s=>e.jsxs("svg",{"aria-hidden":"true",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",color:"#a371f7",className:"inline-block overflow-visible align-text-bottom fill-current",...s,children:[e.jsx("path",{d:"M11.28 6.78a.75.75 0 0 0-1.06-1.06L7.25 8.69 5.78 7.22a.75.75 0 0 0-1.06 1.06l2 2a.75.75 0 0 0 1.06 0l3.5-3.5Z"}),e.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-1.5 0a6.5 6.5 0 1 0-13 0 6.5 6.5 0 0 0 13 0Z"})]}),C=s=>e.jsx("svg",{"aria-hidden":"true",focusable:"false",height:"1em",role:"presentation",viewBox:"0 -960 960 960",width:"1em",className:"inline-block overflow-visible align-text-bottom fill-current",...s,children:e.jsx("path",{d:"M240-400h480v-80H240v80Zm0-120h480v-80H240v80Zm0-120h480v-80H240v80ZM880-80 720-240H160q-33 0-56.5-23.5T80-320v-480q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v720ZM160-320h594l46 45v-525H160v480Zm0 0v-480 480Z"})}),F=s=>{if(s.length!==6&&s.length!==7)return;const r=parseInt(s.charAt(0)==="#"?s.slice(1,7):s,16);return{R:r>>16&255,G:r>>8&255,B:r&255}},S=s=>{const r=s.R/255,t=s.G/255,n=s.B/255,l=Math.min(r,t,n),a=Math.max(r,t,n),i=a-l;let o=0,u=0;const h=(a+l)/2;return i!==0&&(u=i/(h<=.5?a+l:2-a-l),r===a?o=(t-n)/i+(t<n?6:0):t===a?o=(n-r)/i+2:o=(r-t)/i+4,o*=60),{H:o,S:u*100,L:Math.round(h*100)}},Z=({size:s,mode:r,color:t,name:n,style:l})=>{const a=F(t);if(!a)return null;const i=S(a);return e.jsx(_,{size:s,className:`${r==="light"?"label-light":"label-dark"}`,style:{"--label-r":a.R,"--label-g":a.G,"--label-b":a.B,"--label-h":i.H,"--label-s":i.S,"--label-l":i.L,marginRight:"0.250rem",...l},classNames:{content:"font-medium"},children:n})},I=({size:s,mode:r,labels:t})=>t.map((n,l)=>e.jsx(Z,{mode:r,size:s,...n},l)),L=({mode:s,entry:r})=>e.jsxs("div",{className:"flex flex-auto items-center hover:bg-gray-100 dark:hover:bg-gray-800 rounded-none sm:rounded-lg",children:[e.jsx("div",{className:"flex-shrink-0 pt-2 pl-3",children:r.close?e.jsx(M,{height:"2em",width:"2em"}):e.jsx(k,{height:"2em",width:"2em"})}),e.jsxs("div",{className:"min-w-0 p-2 pr-3 md:pr-2",children:[e.jsx(m,{className:"text-large font-medium",color:"foreground",underline:"hover",style:{userSelect:"text"},href:`/chalkboard/${r.id}`,children:r.title}),e.jsx("div",{className:"ml-2 inline",children:e.jsx(I,{size:"sm",mode:s,labels:r.labels})}),e.jsxs("div",{className:"text-gray-400",style:{fontSize:"13px"},children:[`#${r.id.toString(16).slice(0,8)} `,r.close?e.jsxs(e.Fragment,{children:[e.jsx(m,{size:"sm",href:`/user/${r.username}`,children:`@${r.username}`}),e.jsx("p",{className:"inline ml-1",children:`was closed ${p(r.updatedAt)} ago`})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"inline",children:`opened ${p(r.createdAt)} ago by`}),e.jsx(m,{className:"ml-1",size:"sm",href:`/user/${r.username}`,children:`@${r.username}`})]})]})]}),e.jsxs("div",{className:"hidden sm:flex ml-auto flex-shrink-0 items-center justify-between text-right pr-3 whitespace-nowrap ",children:[e.jsx("span",{className:"ml-2 flex-1 flex-shrink-0",children:e.jsx($,{alt:r.username,size:"sm",src:"https://avatars.githubusercontent.com/u/4324516?v=4"})}),e.jsxs("span",{className:"ml-6 flex-1 flex-shrink-0 items-center content-center text-gray-700 dark:text-gray-300",children:[e.jsx(C,{width:"1rem",height:"1rem",className:"inline-flex overflow-visible fill-current"}),e.jsx("span",{className:"ml-1 text-small font-bold",children:r.comments})]})]})]}),R=({entries:s})=>{const[r]=v(w);return e.jsx("div",{className:"w-full divide-y divide-gray-200 dark:divide-gray-700",children:s.map((t,n)=>e.jsx(L,{mode:r,entry:t},n))})},D=s=>e.jsx("svg",{"aria-hidden":"true",focusable:"false",height:"1em",role:"presentation",viewBox:"0 -960 960 960",width:"1em",className:"inline-block overflow-visible align-text-bottom fill-current",...s,children:e.jsx("path",{d:"M480-360 280-560h400L480-360Z"})}),z=({color:s,width:r,height:t})=>e.jsx("span",{className:"flex-shrink-0 inline-block rounded-lg",style:{width:r,height:t,backgroundColor:s}}),d={is:{open:()=>({open:!0})},author:{"@me":()=>({author:"self"}),"*":s=>s.charAt(0)==="@"?{author:s.slice(1,s.length)}:{author:s}},mentions:{"@me":()=>({mentions:"self"}),"*":s=>s.charAt(0)==="@"?{mentions:s.slice(1,s.length)}:{mentions:s}},label:{"*":s=>({label:[s.slice(1,s.length-1)]})}},O=s=>{const r={};return s.split(" ").reduce((t,n)=>{const[l,a]=n.split(":");if(l&&a){const i=l.trim(),o=a.trim();t[i]||(t[i]=new Set),t[i].has(i)||t[i].add(o)}return t},r),Object.fromEntries(Object.entries(r).map(([t,n])=>[t,[...n]]))},E=s=>{const r=[],t=O(s);for(const[n,l]of Object.entries(t))d[n]&&l.forEach(a=>{(d[n][a]||d[n]["*"])&&r.push(`${n}:${a}`)});return r.join(" ")},q=[{close:!1,id:7164271119128596480n,author:BigInt(1),username:"Z-Siqi",comments:1,title:"新加坡 Mount Elizabeth 医院的 Alex Fok 医生可以给16岁开HRT治疗",contentPreview:"Hello",labels:[{name:"内容",color:"#4feeff"},{name:"HRT",color:"#0be01f"}],createdAt:new Date,updatedAt:new Date},{close:!0,id:1164235119128596480n,author:BigInt(2),username:"BeiyanYunyi",comments:2,title:"在页面内跳转时，跳转到的内容被 Header 遮挡 ",contentPreview:"what the fuck?",labels:[{name:"Issue",color:"#fcb6be"}],createdAt:new Date,updatedAt:new Date("Fri Feb 16 2023 23:31:51")},{close:!0,id:1164235119128596481n,author:BigInt(2),username:"BeiyanYunyi",comments:2,title:"在页面内跳转时，跳转到的内容被 Header 遮挡 ",contentPreview:"what the fuck?",labels:[{name:"Issue",color:"#fcb6be"}],createdAt:new Date,updatedAt:new Date("Fri Feb 16 2023 23:31:51")}],G=[{name:"Open chalkboards",rules:"is:open"},{name:"Your chalkboards",rules:"is:open author:@me"},{name:"Everything mentioning you",rules:"is:open mentions:@me"}],me=()=>{const{labels:s}=N(),[r,t]=f.useState("is:open"),[n]=y(r,1e3);return f.useEffect(()=>{r&&t(E(r))},[n]),e.jsxs("div",{className:"sm:pl-2 sm:pr-2",children:[e.jsxs("div",{className:"pb-2 flex gap-2",children:[e.jsx(B,{classNames:{inputWrapper:"pl-0 h-unit-10 rounded-medium rounded-l-none sm:rounded-l-medium"},color:"primary",radius:"md",startContent:e.jsxs(x,{children:[e.jsx(b,{children:e.jsx(c,{endContent:e.jsx(D,{width:"1.25rem",height:"1.25rem"}),size:"md",className:"font-medium",variant:"light",children:"Filter"})}),e.jsx(j,{"aria-label":"chalkboard filter options",children:G.map((l,a)=>e.jsx(g,{onClick:()=>t(l.rules),children:l.name},a))})]}),value:r,onValueChange:t}),e.jsxs(x,{children:[e.jsx(b,{children:e.jsx(c,{className:"hidden md:flex font-medium",variant:"bordered",color:"secondary",children:"Labels"})}),e.jsx(j,{"aria-label":"label filter",selectionMode:"single",onAction:l=>{t(`${r} label:"${s[l].name}"`)},children:e.jsx(T,{title:"Filter by label",children:s.map((l,a)=>e.jsx(g,{textValue:l.name,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{color:l.color,width:"1rem",height:"1rem"}),e.jsx("div",{className:"ml-2 truncate min-w-0 flex items-center",children:e.jsx("div",{className:"font-medium",children:l.name})})]})},a))})})]}),e.jsx(c,{className:"hidden md:flex font-medium",color:"primary",as:m,href:"/chalkboard/new",children:"New Chalkboard"}),e.jsx(c,{className:"flex md:hidden rounded-r-none sm:rounded-r-medium font-medium",color:"primary",as:m,href:"/chalkboard/new",children:"New"})]}),e.jsx("div",{children:e.jsx(R,{entries:q})})]})};export{me as default};
