import{r as g,n as e,C as _,M as J,O as K,bX as S,z as r,b_ as X}from"./index-BZuw93n6.js";import{L as q,F as Q}from"./index-ChNaDT1y.js";import{T as Y,P as A,c as F,g as ee}from"./oauth2-DAPA5i-w.js";import{R as se}from"./index-CNvPc50Z.js";import{A as B}from"./index-BFz3kMmm.js";import{T as te}from"./Trans-Bz2Icpdg.js";import{l as E}from"./chunk-4HJHOVVR-CXAIXo2B.js";import{c as T}from"./chunk-H4VOEXHF-Bkox9SwC.js";import{i as $}from"./chunk-UWUNWEEL-D7WxGfPl.js";import{c as L}from"./chunk-JHUBASYZ-BvpDDz-Q.js";import{i as C}from"./chunk-NNXNFLWG-jK9JqOol.js";import{s as b}from"./chunk-IXXDDLGU-yum4hPNY.js";import{s as ae,l as y}from"./chunk-SWJHOPKY-Bud5L2jj.js";import"./index-DuXFV1Sf.js";import"./chunk-OZXMJY32-VBfMvjtg.js";import"./chunk-CIZQCQPA-juggb4aQ.js";import"./import-BmH5WJZm.js";import"./text-B64jcAFk.js";import"./context-CxrHh6qv.js";import"./import-Cw1Dvkib.js";import"./scrollIntoView-QcgNho31.js";import"./useSelectableItem-Dfuv_8QK.js";import"./useCollator-CVVsI81W.js";import"./chunk-44JHHBS2-B-m0MJ8P.js";const ie=t=>{const{children:s=[],showProgressBar:a=!0,defaultActiveStep:l=1,prevText:p,continueText:i,submitText:f,onContinue:w=()=>{},onPrev:N=()=>{},onSubmit:o=()=>{},disableContinue:u=!1,disableSubmit:h=!1,btnPos:R="space-between",barWidth:D="",strokeColor:I="#cdd3d8",fillStroke:V="#3a4047",stroke:k=2,activeColor:z="#3A4047",activeProgressBorder:U="2px solid #f3f4f5",progressBarClassName:M="",contentBoxClassName:W="",allowClickControl:H=!0}=t,[d,j]=g.useState(0);g.useEffect(()=>{l<=s.length&&l>0?(v(l-1),j(l)):(v(0),j(1))},[]),g.useEffect(()=>{s.length>1&&a&&s.map((n,m)=>{const c=document.getElementById(`input_${m}`);c.classList.length>1?(c.style.background=z,c.style.border=U):(c.style.background="#fff",c.style.border="2px solid #3A4047")})},[d]);const O=()=>{if(!d||d<=1)return;v(d-2);const n=d-1;j(n),N(n)},Z=()=>{if(!d||d>=s.length)return;v(d);const n=d+1;j(n),w(n)},G=n=>{H&&(j(n+1),v(n))},v=n=>{var m;if(s.length>1&&a){const c=n/(s.length-1)*100;document.getElementsByClassName("percent")[0].style.width=`${c}%`}if(s.length>1&&a)for(let c=0;c<s.length;c++){const x=document.getElementById(`input_${c}`),P=parseInt((m=x==null?void 0:x.id)==null?void 0:m.split("_")[1]);P===n&&(x.classList.add("selected"),x.classList.remove("completed")),P<=n&&x.classList.add("completed"),P>n&&x.classList.remove("selected","completed")}};return e.jsxs("div",{className:"stepperDiv",children:[s.length>1&&a&&e.jsx("div",{className:`progressBarDiv ${M}`,children:e.jsxs("div",{className:"progressBarContainer",style:{width:D},children:[e.jsx("div",{className:"progress",style:{borderBottom:`${k}px solid ${I}`},children:e.jsx("div",{className:"percent",style:{borderBottom:`${k}px solid ${V}`}})}),e.jsx("div",{className:"steps",children:s.map((n,m)=>e.jsx("div",{className:"step",id:`input_${m}`,onClick:()=>G(m)},m))})]})}),e.jsxs("div",{className:W,children:[s.length>1?s.map((n,m)=>d===m+1&&n):s,e.jsxs("div",{style:{display:"flex",justifyContent:R,marginTop:"20px"},children:[d>1?e.jsx(_,{className:"font-medium",color:"default",onPress:O,children:p||"Prev"}):e.jsx("span",{}),d<s.length?e.jsx(_,{className:"font-medium",color:"primary",onPress:()=>Z(),isDisabled:u,children:i||"Next"}):e.jsx(_,{className:"font-medium",color:"primary",onPress:()=>o(d),isDisabled:h,children:f||"Submit"})]})]})]})},re=({form:t,setForm:s})=>e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(C,{isClearable:!0,className:"font-medium",type:"text",labelPlacement:"outside",label:r("pages.sign_up.step1.input1"),variant:"bordered",placeholder:" ",value:t.firstname,onValueChange:a=>s({...t,firstname:a})})}),e.jsx(b,{y:4}),e.jsx("div",{children:e.jsx(C,{isClearable:!0,className:"font-medium",type:"text",labelPlacement:"outside",label:r("pages.sign_up.step1.input2"),variant:"bordered",placeholder:" ",value:t.lastname,onValueChange:a=>s({...t,lastname:a})})}),e.jsx(b,{y:4}),e.jsxs(ae,{className:"font-medium",label:r("pages.sign_up.step1.input3"),labelPlacement:"outside",variant:"bordered",placeholder:r("pages.sign_up.step1.input3_placeholder"),onSelectionChange:a=>s({...t,irrigationDitch:a.values().next().value}),children:[e.jsx(y,{children:r("pages.sign_up.step1.options.key1")},"friend-recommend"),e.jsx(y,{children:r("pages.sign_up.step1.options.key2")},"search-engine"),e.jsx(y,{children:r("pages.sign_up.step1.options.key3")},"third-party-website-recommend"),e.jsx(y,{children:r("pages.sign_up.step1.options.key4")},"other")]})]}),le=({form:t,setForm:s})=>e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(C,{isClearable:!0,className:"font-medium",type:"email",labelPlacement:"outside",label:r("pages.sign_up.step2.input1"),variant:"bordered",placeholder:" ",isInvalid:!S(t.email),errorMessage:S(t.email)?"":"invalid email address",value:t.email,onValueChange:a=>s({...t,email:a})})}),e.jsx(b,{y:4}),e.jsx("div",{children:e.jsx(C,{isClearable:!0,className:"font-medium",type:"text",labelPlacement:"outside",label:r("pages.sign_up.step2.input2"),variant:"bordered",placeholder:" ",value:t.inviteCode,onValueChange:a=>s({...t,inviteCode:a})})})]}),ne=({form:t,setForm:s})=>e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(A,{className:"font-medium",labelPlacement:"outside",label:r("pages.sign_up.step3.input1"),variant:"bordered",placeholder:" ",value:t.password,onValueChange:a=>s({...t,password:a})})}),e.jsx(b,{y:4}),e.jsx("div",{children:e.jsx(A,{className:"font-medium",labelPlacement:"outside",label:r("pages.sign_up.step3.input2"),variant:"bordered",placeholder:" ",value:t.repeatPassword,onValueChange:a=>s({...t,repeatPassword:a}),errorMessage:t.password!==t.repeatPassword?"invalid repeat password":""})}),e.jsx(b,{y:4}),e.jsx("div",{className:"w-full flex justify-center",children:e.jsx(se,{onValueChange:a=>{s({...t,recaptcha:a})}})}),e.jsx(b,{y:4}),e.jsx("div",{className:"flex items-start",children:e.jsx(F,{onValueChange:a=>s({...t,acceptTerm:a}),children:e.jsx(te,{i18nKey:"pages.sign_up.step3.terms",components:{Link:e.jsx(E,{href:"/docs/t?part=term"})}})})})]}),$e=()=>{const t=J(),[s,a]=g.useState(!0),[l,p]=g.useState({step:1,disabled:!1}),[i,f]=g.useState({recaptcha:null,acceptTerm:!1,email:"",firstname:"",irrigationDitch:"",lastname:"",password:"",repeatPassword:""}),{show:w}=K(),N=()=>{p({...l,disabled:!0}),X({email:i.email,password:i.password,firstname:i.firstname,lastname:i.lastname,ticket:i.recaptcha,inviteCode:i.inviteCode,payload:i.authCallback}).then(o=>{var u,h;if(!((u=o.data)!=null&&u.status)){w({message:(h=o.data)==null?void 0:h.msg});return}t("/login")}).catch(o=>{w({message:o})}).finally(()=>{p({...l,disabled:!1})})};return g.useEffect(()=>{switch(p({...l,disabled:!0}),l.step){case 1:p({...l,disabled:!i.firstname||!i.lastname||!i.irrigationDitch});break;case 2:p({...l,disabled:!i.email||!S(i.email)});break;case 3:p({...l,disabled:!i.recaptcha||!i.password||i.password!==i.repeatPassword||!i.acceptTerm});break}},[i,l.step]),g.useEffect(()=>{const o=window.location.hash;if(!o)return;const u=new URLSearchParams(o.substring(1)).get("tgAuthResult");if(!u)return;const h=JSON.parse(atob(u));f({...i,firstname:h.first_name,lastname:h.last_name,authCallback:u}),a(!1)},[]),e.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 mx-auto h-screen lg:py-0",children:[e.jsx(E,{href:"/",children:e.jsx(q,{className:"select-none",width:200,loading:"lazy"})}),e.jsxs("div",{className:`${s?"":"hidden"} mt-10 flex flex-row justify-between space-x-4 text-medium`,children:[e.jsxs(T,{isFooterBlurred:!0,radius:"lg",className:"border-none",children:[e.jsx($,{alt:r("pages.sign_up.import_from_telegram"),className:"object-cover",height:200,src:B({src:"/images/gifs/signup_new_account.gif",custom:!0}),width:200,radius:"lg",isZoomed:!0}),e.jsx(L,{className:"p-0 justify-center overflow-hidden absolute before:rounded-xl rounded-large bottom-1 w-[calc(100%_-_8px)] shadow-small ml-1 z-10",children:e.jsx(_,{variant:"solid",color:"primary",radius:"lg",fullWidth:!0,onClick:()=>a(!1),children:r("pages.sign_up.new_account")})})]}),e.jsxs(T,{isFooterBlurred:!0,radius:"lg",className:"border-none",children:[e.jsx($,{alt:r("pages.sign_up.import_from_telegram"),className:"object-cover",height:200,src:B({src:"/images/gifs/signup_import_from_telegram.gif",custom:!0}),width:200,radius:"lg",isZoomed:!0}),e.jsx(L,{className:"p-0 justify-center overflow-hidden absolute before:rounded-xl rounded-large bottom-1 w-[calc(100%_-_8px)] shadow-small ml-1 z-10",children:e.jsx(_,{variant:"solid",color:"primary",radius:"lg",fullWidth:!0,onClick:()=>{window.location.href=Y({botID:"7068700945",origin:ee(),redirectURI:"https://itrans.app/signup"})},children:r("pages.sign_up.import_from_telegram")})})]})]}),e.jsx("div",{className:`w-full mt-6 sm:max-w-md xl:p-5 p-2 ${s?"hidden":""}`,children:e.jsxs(ie,{defaultActiveStep:l.step,showProgressBar:!1,prevText:r("step_prev"),continueText:r("step_next"),submitText:r("pages.sign_up.sign_up"),disableContinue:l.disabled,disableSubmit:l.disabled,onContinue:o=>p({...l,step:o}),onPrev:o=>p({...l,step:o}),onSubmit:N,children:[e.jsx(re,{form:i,setForm:f}),e.jsx(le,{form:i,setForm:f}),e.jsx(ne,{form:i,setForm:f})]})}),e.jsx(Q.Login,{})]})};export{$e as default};
