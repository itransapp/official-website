import{r,q as y,h as N,K as P,P as _,L as k,l as e,z as b,R as O}from"./index-C-Prt1zy.js";import{P as R}from"./Preview-jQkY4GNl.js";import{R as S}from"./index-DwuLFNjh.js";import{L as A,C as L}from"./ColorDot-vk9PtYQE.js";import{u as $}from"./index-BkHgiBvb.js";import{m as D,a as V,b as E,c as I,d as T}from"./chunk-II5OMS4Q-DKilbskq.js";import{s as j}from"./chunk-KRADFROI-pCWXqkOn.js";import{s as z,l as B}from"./chunk-ZFWMN6TD-CiMZN_4w.js";import{i as F}from"./chunk-TC4QW7OA-CoWQUZMs.js";import"./index-BDCPitzD.js";import"./import-DmZ4oXrM.js";import"./import-FAi3ZVro.js";import"./chunk-LY2CD73K-Cqrt4fqR.js";import"./chunk-CAFRINWI-CcU5yOMx.js";import"./chunk-OFH6WYRQ-BFMlG2hP.js";import"./Combination-BoDDcLfA.js";import"./chunk-44JHHBS2-CofP4Tlp.js";function w(i,u=[]){const l=r.useRef(i);return $(()=>{l.current=i}),r.useCallback((...c)=>{var o;return(o=l.current)==null?void 0:o.call(l,...c)},u)}function G(i={}){const{id:u,defaultOpen:l,isOpen:c,onClose:o,onOpen:t,onChange:d=()=>{}}=i,m=w(t),s=w(o),[a,n]=y(c,l||!1,d),g=r.useId(),C=u||g,p=c!==void 0,h=r.useCallback(()=>{p||n(!1),s==null||s()},[p,s]),x=r.useCallback(()=>{p||n(!0),m==null||m()},[p,m]),v=r.useCallback(()=>{(a?h:x)()},[a,x,h]);return{isOpen:!!a,onOpen:x,onClose:h,onOpenChange:v,isControlled:p,getButtonProps:(f={})=>({...f,"aria-expanded":a,"aria-controls":C,onClick:N(f.onClick,v)}),getDisclosureProps:(f={})=>({...f,hidden:!a,id:C})}}const oe=()=>{const i=P(),{labels:u}=_(),{show:l}=k(),{isOpen:c,onOpenChange:o}=G(),[t,d]=r.useState({title:"",labels:[],description:"",recaptcha:null}),m=()=>{o(),O({labels:t.labels,title:t.title,content:t.description,visible:!0,ticket:t.recaptcha||""}).then(s=>{var a,n;if(!((a=s.data)!=null&&a.status)){l({message:(n=s.data)==null?void 0:n.msg});return}window.onbeforeunload=null,window.onunload=null,i("/chalkboard")}).catch(s=>{l({message:s})})};return r.useEffect(()=>{if(!t.title&&!t.description){window.onbeforeunload=null,window.onunload=null;return}window.onbeforeunload=()=>"The content has not been saved. Are you sure you want to leave?",window.onunload=()=>"The content has not been saved. Are you sure you want to leave?"},[t.title,t.description]),e.jsxs("div",{className:"pb-5",children:[e.jsx(D,{isOpen:c,onOpenChange:o,children:e.jsx(V,{children:s=>e.jsxs(e.Fragment,{children:[e.jsx(E,{children:"Verify your is human"}),e.jsx(I,{className:"flex items-center justify-center",children:e.jsx(S,{onValueChange:a=>d({...t,recaptcha:a})})}),e.jsxs(T,{children:[e.jsx(b,{color:"danger",variant:"light",onPress:s,children:"Cancel"}),e.jsx(b,{color:"primary",onPress:m,isDisabled:!t.recaptcha,children:"Submit"})]})]})})}),e.jsxs("div",{className:"pl-1 pr-1 md:pl-4 md:pr-4",children:[e.jsx("span",{className:"ml-1 text-lg font-bold",children:"Add a title"}),e.jsx(j,{y:2}),e.jsx(F,{isClearable:!0,className:"font-medium",variant:"bordered",labelPlacement:"outside",value:t.title,onValueChange:s=>d({...t,title:s})}),e.jsx(j,{y:2}),e.jsx("span",{className:"ml-1 text-lg font-bold",children:"Add a description"}),e.jsx(j,{y:2}),e.jsx(R,{className:"w-full max-h-screen",color:"primary",content:t.description,setContent:s=>d({...t,description:s}),classNames:{panel:"px-0"}}),e.jsxs("div",{className:"flex flex-wrap justify-between space-y-2",children:[e.jsx(z,{items:u,label:"Labels",placeholder:"Select labels",labelPlacement:"inside",className:"font-medium",fullWidth:!1,selectionMode:"multiple",classNames:{value:"mt-1"},onSelectionChange:s=>{const a=[];for(const n of s)a.push(BigInt(n));d({...t,labels:a})},renderValue:s=>{const a=[];return s.map(n=>n.data?a.push({...n.data}):null),e.jsx(A,{size:"md",labels:a})},children:s=>e.jsx(B,{textValue:s.name,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{color:s.color,width:"1rem",height:"1rem"}),e.jsx("div",{className:"ml-2 truncate min-w-0 flex items-center",children:e.jsx("div",{className:"font-medium",children:s.name})})]})},s.id.toString())}),e.jsx(b,{className:"font-medium",color:"primary",onPress:()=>o(),isDisabled:!t.title||!t.description,children:"Submit new chalkboard"})]}),e.jsx("div",{className:"flex flex-wrap justify-end space-y-2",children:e.jsxs("p",{className:"text-sm font-medium text-transgender mt-3",children:["Remember, that your Chalkboard should adhere to the ",e.jsx("p",{className:"font-bold inline",children:"iTrans Community Content Guidelines"})]})})]})]})};export{oe as default};
