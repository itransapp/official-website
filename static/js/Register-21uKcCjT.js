import{r as m,l as e,z as y,J as Y,L as H,as as S,av as J}from"./index-B2GMOWNH.js";import{L as O,F as U}from"./index-DCL68bbz.js";import{P,c as q}from"./Password-BXtPhZQx.js";import{R as G}from"./index-A9FIoxrt.js";import{l as _}from"./chunk-MPX6TMFQ-CG_ON77q.js";import{i as j}from"./chunk-TC4QW7OA-CRQY_DX1.js";import{s as p}from"./chunk-KRADFROI-PJmQbb6i.js";import{s as K,l as v}from"./chunk-ZFWMN6TD-BafI9tcA.js";import"./index-utqsVixc.js";import"./index-BAxsJICA.js";import"./chunk-OFGZKCFR-BRa4ZTrN.js";import"./chunk-CAFRINWI-CcU5yOMx.js";import"./chunk-LY2CD73K-0Iaz8i2y.js";import"./import-CnjPY1I3.js";import"./import-ot1L8swK.js";import"./chunk-44JHHBS2-C1Xhd_Lb.js";const Q=l=>{const{children:s=[],showProgressBar:a=!0,defaultActiveStep:t=1,prevText:x,continueText:g,submitText:w,onContinue:d=()=>{},onPrev:f=()=>{},onSubmit:b=()=>{},disableContinue:k=!1,disableSubmit:B=!1,btnPos:T="space-between",barWidth:A="",strokeColor:E="#cdd3d8",fillStroke:L="#3a4047",stroke:N=2,activeColor:$="#3A4047",activeProgressBorder:V="2px solid #f3f4f5",progressBarClassName:D="",contentBoxClassName:I="",allowClickControl:R=!0}=l,[r,u]=m.useState(0);m.useEffect(()=>{t<=s.length&&t>0?(h(t-1),u(t)):(h(0),u(1))},[]),m.useEffect(()=>{s.length>1&&a&&s.map((i,o)=>{const n=document.getElementById(`input_${o}`);n.classList.length>1?(n.style.background=$,n.style.border=V):(n.style.background="#fff",n.style.border="2px solid #3A4047")})},[r]);const z=()=>{if(!r||r<=1)return;h(r-2);const i=r-1;u(i),f(i)},M=()=>{if(!r||r>=s.length)return;h(r);const i=r+1;u(i),d(i)},W=i=>{R&&(u(i+1),h(i))},h=i=>{var o;if(s.length>1&&a){const n=i/(s.length-1)*100;document.getElementsByClassName("percent")[0].style.width=`${n}%`}if(s.length>1&&a)for(let n=0;n<s.length;n++){const c=document.getElementById(`input_${n}`),C=parseInt((o=c==null?void 0:c.id)==null?void 0:o.split("_")[1]);C===i&&(c.classList.add("selected"),c.classList.remove("completed")),C<=i&&c.classList.add("completed"),C>i&&c.classList.remove("selected","completed")}};return e.jsxs("div",{className:"stepperDiv",children:[s.length>1&&a&&e.jsx("div",{className:`progressBarDiv ${D}`,children:e.jsxs("div",{className:"progressBarContainer",style:{width:A},children:[e.jsx("div",{className:"progress",style:{borderBottom:`${N}px solid ${E}`},children:e.jsx("div",{className:"percent",style:{borderBottom:`${N}px solid ${L}`}})}),e.jsx("div",{className:"steps",children:s.map((i,o)=>e.jsx("div",{className:"step",id:`input_${o}`,onClick:()=>W(o)},o))})]})}),e.jsxs("div",{className:I,children:[s.length>1?s.map((i,o)=>r===o+1&&i):s,e.jsxs("div",{style:{display:"flex",justifyContent:T,marginTop:"20px"},children:[r>1?e.jsx(y,{className:"font-medium",color:"default",onPress:z,children:"Prev"}):e.jsx("span",{}),r<s.length?e.jsx(y,{className:"font-medium",color:"primary",onPress:()=>M(),isDisabled:k,children:"Next"}):e.jsx(y,{className:"font-medium",color:"primary",onPress:()=>b(r),isDisabled:B,children:"Submit"})]})]})]})},X=({form:l,setForm:s})=>e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(j,{isClearable:!0,className:"font-medium",type:"text",labelPlacement:"outside",label:"First name",variant:"bordered",placeholder:" ",value:l.firstname,onValueChange:a=>s({...l,firstname:a})})}),e.jsx(p,{y:4}),e.jsx("div",{children:e.jsx(j,{isClearable:!0,className:"font-medium",type:"text",labelPlacement:"outside",label:"Last name",variant:"bordered",placeholder:" ",value:l.lastname,onValueChange:a=>s({...l,lastname:a})})}),e.jsx(p,{y:4}),e.jsxs(K,{className:"font-medium",label:"Where did you hear about iTrans ?",labelPlacement:"outside",variant:"bordered",placeholder:"None",onSelectionChange:a=>s({...l,irrigationDitch:a.values().next().value}),children:[e.jsx(v,{children:"Friend recommend"},"friend-recommend"),e.jsx(v,{children:"Search Engine"},"search-engine"),e.jsx(v,{children:"Third party site recommend"},"third-party-website-recommend"),e.jsx(v,{children:"Other"},"other")]})]}),Z=({form:l,setForm:s})=>e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(j,{isClearable:!0,className:"font-medium",type:"email",labelPlacement:"outside",label:"Your available email address",variant:"bordered",placeholder:" ",errorMessage:S(l.email)?"":"invalid email address",value:l.email,onValueChange:a=>s({...l,email:a})})}),e.jsx(p,{y:4}),e.jsx("div",{children:e.jsx(j,{isClearable:!0,className:"font-medium",type:"text",labelPlacement:"outside",label:"Invite code (optional)",variant:"bordered",placeholder:" ",value:l.inviteCode,onValueChange:a=>s({...l,inviteCode:a})})})]}),F=({form:l,setForm:s})=>e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(P,{className:"font-medium",labelPlacement:"outside",label:"Password",variant:"bordered",placeholder:" ",value:l.password,onValueChange:a=>s({...l,password:a})})}),e.jsx(p,{y:4}),e.jsx("div",{children:e.jsx(P,{className:"font-medium",labelPlacement:"outside",label:"Repeat Your Password",variant:"bordered",placeholder:" ",value:l.repeatPassword,onValueChange:a=>s({...l,repeatPassword:a}),errorMessage:l.password!==l.repeatPassword?"invalid repeat password":""})}),e.jsx(p,{y:4}),e.jsx("div",{className:"w-full flex justify-center",children:e.jsx(G,{onValueChange:a=>{s({...l,recaptcha:a})}})}),e.jsx(p,{y:4}),e.jsx("div",{className:"flex items-start",children:e.jsxs(q,{onValueChange:a=>s({...l,acceptTerm:a}),children:["I accept the ",e.jsx(_,{href:"/docs/t?part=term",children:"Terms and Conditions"})]})})]}),fe=()=>{const l=Y(),[s,a]=m.useState({step:1,disabled:!1}),[t,x]=m.useState({recaptcha:null,acceptTerm:!1,email:"",firstname:"",irrigationDitch:"",lastname:"",password:"",repeatPassword:""}),{show:g}=H(),w=()=>{a({...s,disabled:!0}),J({email:t.email,password:t.password,firstname:t.firstname,lastname:t.lastname,ticket:t.recaptcha,inviteCode:t.inviteCode}).then(d=>{var f,b;if(!((f=d.data)!=null&&f.status)){g({message:(b=d.data)==null?void 0:b.msg});return}l("/login")}).catch(d=>{g({message:d})}).finally(()=>{a({...s,disabled:!1})})};return m.useEffect(()=>{switch(a({...s,disabled:!0}),s.step){case 1:a({...s,disabled:!t.firstname||!t.lastname||!t.irrigationDitch});break;case 2:a({...s,disabled:!t.email||!S(t.email)});break;case 3:a({...s,disabled:!t.recaptcha||!t.password||t.password!==t.repeatPassword||!t.acceptTerm});break}},[t,s.step]),e.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 mx-auto h-screen lg:py-0",children:[e.jsx(_,{href:"/",children:e.jsx(O,{className:"select-none",width:200,loading:"lazy"})}),e.jsx("div",{className:"w-full mt-6 sm:max-w-md xl:p-5 p-2",children:e.jsxs(Q,{defaultActiveStep:s.step,showProgressBar:!1,prevText:"Back",continueText:"Next",submitText:"Sign up",disableContinue:s.disabled,disableSubmit:s.disabled,onContinue:d=>a({...s,step:d}),onPrev:d=>a({...s,step:d}),onSubmit:w,children:[e.jsx(X,{form:t,setForm:x}),e.jsx(Z,{form:t,setForm:x}),e.jsx(F,{form:t,setForm:x})]})}),e.jsx(U.Login,{})]})};export{fe as default};
