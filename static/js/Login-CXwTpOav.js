import{r as d,K as g,a3 as j,J as v,l as e,z as b,an as w}from"./index-C4vVSyb1.js";import{L as N,F as y}from"./index-D34dwi0a.js";import{P as C,c as P}from"./Password-cGHFXvCv.js";import{i as f,a as u}from"./validator-CEpkGiwj.js";import{R as _}from"./index-BkEKdAqM.js";import{l as i}from"./chunk-MPX6TMFQ-CbjVmYVo.js";import{i as k}from"./chunk-TC4QW7OA-C6M0cG7D.js";import{s as L}from"./chunk-KRADFROI-CTp0tPVL.js";import"./chunk-OFGZKCFR-BeBkqU0F.js";import"./index-DFUITGzF.js";import"./index-lkHqbR01.js";import"./chunk-CAFRINWI-CcU5yOMx.js";import"./chunk-M3MASYO7-Cli7815W.js";const T=()=>{const[a,t]=d.useState({certificate:"",password:"",recaptcha:"",remember:!1}),{show:r}=g(),l=j(),{authed:p,update:x}=v();d.useEffect(()=>{if(p()){l("/");return}},[]);const h=()=>{if(!f(a.certificate)&&!u(a.certificate)||!a.password||!a.recaptcha){r({message:"Invalid form input"});return}w({email:u(a.certificate)?a.certificate:void 0,username:f(a.certificate)?a.certificate:void 0,password:a.password,ticket:a.recaptcha}).then(s=>{var c,o,m,n;if(!((c=s.data)!=null&&c.status)){r({message:(o=s.data)==null?void 0:o.msg});return}x({ticket:(m=s.data.data)==null?void 0:m.ticket,expire:(n=s.data.data)==null?void 0:n.expire}),l("/")}).catch(s=>{r({message:s.toString()})})};return e.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 mx-auto h-screen lg:py-0",children:[e.jsx(i,{href:"/",children:e.jsx(N,{className:"select-none",width:200,loading:"lazy"})}),e.jsx("div",{className:"w-full mt-6 sm:max-w-md xl:p-0",children:e.jsx("div",{className:"p-2",children:e.jsxs("form",{className:"space-y-4 md:space-y-6",action:"#",children:[e.jsx("div",{children:e.jsx(k,{isClearable:!0,className:"font-medium",type:"email",labelPlacement:"outside",label:"Username or email address",variant:"bordered",placeholder:" ",value:a.certificate,onValueChange:s=>{t({...a,certificate:s})},onClear:()=>{t({...a,certificate:""})}})}),e.jsx(L,{y:4}),e.jsx("div",{children:e.jsx(C,{className:"font-medium",labelPlacement:"outside",label:"Password",variant:"bordered",placeholder:" ",value:a.password,onValueChange:s=>{t({...a,password:s})}})}),e.jsx("div",{className:"w-full flex justify-center",children:e.jsx(_,{onValueChange:s=>{t({...a,recaptcha:s})}})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-start",children:e.jsx(P,{isSelected:a.remember,onValueChange:s=>{t({...a,remember:s})},children:"Remember me"})}),e.jsx(i,{isDisabled:!0,className:"font-medium",href:"/forgot_password",children:"Forgot password?"})]}),e.jsx(b,{className:"font-bold",color:"primary",fullWidth:!0,size:"lg",onClick:h,children:"Sign in"}),e.jsxs("p",{className:"text-sm font-light text-gray-500 dark:text-gray-400",children:["Donâ€™t have an account yet? ",e.jsx(i,{className:"font-medium",size:"sm",href:"/signup",children:"Sign up!"})]})]})})}),e.jsx(y.Login,{})]})};export{T as default};
