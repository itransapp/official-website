import{K as x,X as b,M as j,r as m,l as e,y as l,B as i,Z as g}from"./index-PT_xMk5q.js";import{u as w,P as y}from"./Preview-DynuiubK.js";import{R as v}from"./index-DsnIJiws.js";import{L as N,C as _}from"./ColorDot-DKzwSRim.js";import{m as C,a as k,b as P,c as A,d as D}from"./chunk-II5OMS4Q-CP1TD40d.js";import{s as d}from"./chunk-KRADFROI-BuIdZHR9.js";import{s as R,l as S}from"./chunk-ZFWMN6TD-DnhmE0Rn.js";import{i as T}from"./chunk-TC4QW7OA-BR00g-6Q.js";import"./index-B_Lbu_a4.js";import"./index-FwbqA4lt.js";import"./context-CJjtO0hB.js";import"./import-CNLXw_Ym.js";import"./import-Dnv4Ybhu.js";import"./chunk-LY2CD73K-BMDpbquS.js";import"./chunk-CAFRINWI-CcU5yOMx.js";import"./chunk-OFH6WYRQ-C2qKe6_b.js";import"./Combination-qeRiwymh.js";import"./chunk-44JHHBS2-XUvCi3Gk.js";const U=()=>{const u=x(),{labels:p}=b(),{show:c}=j(),{isOpen:h,onOpenChange:o}=w(),[s,n]=m.useState({title:"",labels:[],description:"",recaptcha:null}),f=()=>{o(),g({labels:s.labels,title:s.title,content:s.description,visible:!0,ticket:s.recaptcha||""}).then(a=>{var t,r;if(!((t=a.data)!=null&&t.status)){c({message:(r=a.data)==null?void 0:r.msg});return}window.onbeforeunload=null,window.onunload=null,u("/chalkboard")}).catch(a=>{c({message:a})})};return m.useEffect(()=>{if(!s.title&&!s.description){window.onbeforeunload=null,window.onunload=null;return}window.onbeforeunload=()=>"The content has not been saved. Are you sure you want to leave?",window.onunload=()=>"The content has not been saved. Are you sure you want to leave?"},[s.title,s.description]),e.jsxs("div",{className:"pb-5",children:[e.jsx(C,{isOpen:h,onOpenChange:o,children:e.jsx(k,{children:a=>e.jsxs(e.Fragment,{children:[e.jsx(P,{children:l("captcha")}),e.jsx(A,{className:"flex items-center justify-center",children:e.jsx(v,{onValueChange:t=>n({...s,recaptcha:t})})}),e.jsxs(D,{children:[e.jsx(i,{color:"danger",variant:"light",onPress:a,children:l("cancel")}),e.jsx(i,{color:"primary",onPress:f,isDisabled:!s.recaptcha,children:l("submit")})]})]})})}),e.jsxs("div",{className:"pl-1 pr-1 md:pl-4 md:pr-4",children:[e.jsx("span",{className:"ml-1 text-lg font-bold",children:l("pages.chalkboard.create.add_title")}),e.jsx(d,{y:2}),e.jsx(T,{isClearable:!0,className:"font-medium",variant:"bordered",labelPlacement:"outside",value:s.title,onValueChange:a=>n({...s,title:a})}),e.jsx(d,{y:2}),e.jsx("span",{className:"ml-1 text-lg font-bold",children:l("pages.chalkboard.create.add_desc")}),e.jsx(d,{y:2}),e.jsx(y,{className:"w-full max-h-screen",color:"primary",content:s.description,setContent:a=>n({...s,description:a}),classNames:{panel:"px-0"}}),e.jsxs("div",{className:"flex flex-wrap justify-between space-y-2",children:[e.jsx(R,{items:p,label:l("label"),placeholder:l("pages.chalkboard.create.add_label"),labelPlacement:"inside",className:"font-medium",fullWidth:!1,selectionMode:"multiple",classNames:{value:"mt-1"},onSelectionChange:a=>{const t=[];for(const r of a)t.push(BigInt(r));n({...s,labels:t})},renderValue:a=>{const t=[];return a.map(r=>r.data?t.push({...r.data}):null),e.jsx(N,{size:"md",labels:t})},children:a=>e.jsx(S,{textValue:a.name,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{color:a.color,width:"1rem",height:"1rem"}),e.jsx("div",{className:"ml-2 truncate min-w-0 flex items-center",children:e.jsx("div",{className:"font-medium",children:a.name})})]})},a.id.toString())}),e.jsx(i,{className:"font-medium",color:"primary",onPress:()=>o(),isDisabled:!s.title||!s.description,children:l("pages.chalkboard.create.submit")})]}),e.jsx("div",{className:"flex flex-wrap justify-end space-y-2",children:e.jsxs("p",{className:"text-sm font-medium text-transgender mt-3",children:["Remember, that your Chalkboard should adhere to the"," ",e.jsx("p",{className:"font-bold inline",children:"iTrans Community Content Guidelines"})]})})]})]})};export{U as default};
