import{r as i,P as v,af as w,J as b,w as y,l as e,z as N,ak as C}from"./index-Bm0YF5iz.js";import{L,F as R}from"./index-D8-E8mud.js";import{P as k,R as A,c as P}from"./recaptcha-wrapper-2IK62f7X.js";import{i as f,a as u}from"./validator-CEpkGiwj.js";import{l}from"./chunk-MPX6TMFQ-BT8HViS3.js";import{i as _}from"./chunk-TC4QW7OA-fEiEc1BK.js";import{s as z}from"./chunk-KRADFROI-DyXQhfsi.js";import"./index-B4tftrdQ.js";import"./chunk-CAFRINWI-CcU5yOMx.js";import"./chunk-M3MASYO7-BXOdcU6G.js";const Y=()=>{const[a,t]=i.useState({certificate:"",password:"",recaptcha:"",remember:!1}),p=i.createRef(),{show:r}=v(),o=w(),{authed:h,update:x}=b(),{mode:g}=y();i.useEffect(()=>{if(h()){o("/");return}},[]);const j=()=>{if(!f(a.certificate)&&!u(a.certificate)||!a.password){r({message:"Invalid form input"});return}C({email:u(a.certificate)?a.certificate:void 0,username:f(a.certificate)?a.certificate:void 0,password:a.password}).then(s=>{var c,n,d,m;if(!((c=s.data)!=null&&c.status)){r({message:(n=s.data)==null?void 0:n.msg});return}x({ticket:(d=s.data.data)==null?void 0:d.ticket,expire:(m=s.data.data)==null?void 0:m.expire}),o("/")}).catch(s=>{r({message:s.toString()})})};return e.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 mx-auto h-screen lg:py-0",children:[e.jsx(l,{href:"/",children:e.jsx(L,{className:"select-none",width:200,loading:"lazy"})}),e.jsx("div",{className:"w-full mt-6 sm:max-w-md xl:p-0",children:e.jsx("div",{className:"p-2",children:e.jsxs("form",{className:"space-y-4 md:space-y-6",action:"#",children:[e.jsx("div",{children:e.jsx(_,{isClearable:!0,className:"font-medium",type:"email",labelPlacement:"outside",label:"Username or email address",variant:"bordered",placeholder:" ",value:a.certificate,onValueChange:s=>{t({...a,certificate:s})},onClear:()=>{t({...a,certificate:""})}})}),e.jsx(z,{y:4}),e.jsx("div",{children:e.jsx(k,{className:"font-medium",labelPlacement:"outside",label:"Password",variant:"bordered",placeholder:" ",value:a.password,onValueChange:s=>{t({...a,password:s})}})}),e.jsx("div",{className:"w-full flex justify-center",children:e.jsx(A,{style:{width:302,height:76,borderRadius:3,overflow:"hidden"},theme:g,ref:p,size:"normal",sitekey:"6Lekx48pAAAAANMG7YML6sG9R8o4lorLH3UwMYve",onChange:s=>{t({...a,recaptcha:s})}})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-start",children:e.jsx(P,{isSelected:a.remember,onValueChange:s=>{t({...a,remember:s})},children:"Remember me"})}),e.jsx(l,{isDisabled:!0,className:"font-medium",href:"/forgot_password",children:"Forgot password?"})]}),e.jsx(N,{className:"font-bold",color:"primary",fullWidth:!0,size:"lg",onClick:j,children:"Sign in"}),e.jsxs("p",{className:"text-sm font-light text-gray-500 dark:text-gray-400",children:["Donâ€™t have an account yet? ",e.jsx(l,{className:"font-medium",size:"sm",href:"/signup",children:"Sign up!"})]})]})})}),e.jsx(R.Login,{})]})};export{Y as default};
