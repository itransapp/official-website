import{l as e,r as h,M as N,K as C,L,z as P,y as r,B as x,N as g,ay as j,az as z,aA as A,aB as V}from"./index-BJB5ivqQ.js";import{L as H,F as B}from"./chunk-index-BDYXulVD.js";import{P as M,c as E}from"./chunk-Password-BPl2CWab.js";import{R as F}from"./chunk-index-DUAOQo21.js";import{T as S}from"./chunk-Trans-Bp1_obWW.js";import{l as c}from"./chunk-chunk-MPX6TMFQ-BaznUk19.js";import{i as R}from"./chunk-chunk-TC4QW7OA-DMyUkUFC.js";import{s as U}from"./chunk-chunk-KRADFROI-D5SgYlnK.js";import"./chunk-index-93a82q7x.js";import"./chunk-index-C_iefjck.js";import"./chunk-chunk-OFGZKCFR-CPntm3vh.js";import"./chunk-chunk-CAFRINWI-CcU5yOMx.js";import"./chunk-chunk-LY2CD73K-C7NVsmB4.js";import"./chunk-context-B75TDu2a.js";const G=s=>e.jsxs("svg",{height:"1em",width:"1em",viewBox:"0 0 48 48",...s,children:[e.jsx("defs",{children:e.jsx("path",{id:"a",d:"M44.5 20H24v8.5h11.8C34.7 33.9 30.1 37 24 37c-7.2 0-13-5.8-13-13s5.8-13 13-13c3.1 0 5.9 1.1 8.1 2.9l6.4-6.4C34.6 4.1 29.6 2 24 2 11.8 2 2 11.8 2 24s9.8 22 22 22c11 0 21-8 21-22 0-1.3-.2-2.7-.5-4z"})}),e.jsx("clipPath",{id:"b",children:e.jsx("use",{xlinkHref:"#a",overflow:"visible"})}),e.jsx("path",{clipPath:"url(#b)",fill:"#FBBC05",d:"M0 37V11l17 13z"}),e.jsx("path",{clipPath:"url(#b)",fill:"#EA4335",d:"M0 11l17 13 7-6.1L48 14V0H0z"}),e.jsx("path",{clipPath:"url(#b)",fill:"#34A853",d:"M0 37l30-23 7.9 1L48 0v48H0z"}),e.jsx("path",{clipPath:"url(#b)",fill:"#4285F4",d:"M48 48L17 24l-4-3 35-10z"})]}),ee=()=>{const[s,l]=h.useState({certificate:"",password:"",recaptcha:"",remember:!1}),{show:i}=N(),d=C(),{authed:v,update:b}=L(),w=P();h.useEffect(()=>{if(v()){d("/");return}},[]);const y=()=>{if(!g(s.certificate)&&!j(s.certificate)||!s.password||!s.recaptcha){i({message:"Invalid form input"});return}z({email:j(s.certificate)?s.certificate:void 0,username:g(s.certificate)?s.certificate:void 0,password:s.password,ticket:s.recaptcha}).then(a=>{var n,o,m,f;if(!((n=a.data)!=null&&n.status)){i({message:(o=a.data)==null?void 0:o.msg});return}b({ticket:(m=a.data.data)==null?void 0:m.ticket,expire:(f=a.data.data)==null?void 0:f.expire}),A().then(t=>{var p,u;!((p=t.data)!=null&&p.data)||!((u=t.data)!=null&&u.status)||w.set({...t.data.data.profile,recentActivity:t.data.data.recentActivity,emailVerified:t.data.data.emailVerified})}).catch(t=>{i({message:t.toString()})}).finally(()=>d("/"))}).catch(a=>i({message:a.toString()}))},_=()=>{V().then(a=>{var n,o;if(!((n=a.data)!=null&&n.status)||!a.data.data){i({message:(o=a.data)==null?void 0:o.msg});return}window.location.href=a.data.data.url}).catch(a=>i({message:a.toString()}))};return e.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 mx-auto h-screen lg:py-0",children:[e.jsx(c,{href:"/",children:e.jsx(H,{className:"select-none",width:200,loading:"lazy"})}),e.jsx("div",{className:"w-full mt-6 sm:max-w-md xl:p-0",children:e.jsxs("div",{className:"p-2",children:[e.jsxs("form",{className:"space-y-4 md:space-y-6",action:"#",children:[e.jsx("div",{children:e.jsx(R,{isClearable:!0,className:"font-medium",type:"email",labelPlacement:"outside",label:r("pages.sign_in.input1"),variant:"bordered",placeholder:" ",value:s.certificate,onValueChange:a=>{l({...s,certificate:a})},onClear:()=>{l({...s,certificate:""})}})}),e.jsx(U,{y:4}),e.jsx("div",{children:e.jsx(M,{className:"font-medium",labelPlacement:"outside",label:r("pages.sign_in.input2"),variant:"bordered",placeholder:" ",value:s.password,onValueChange:a=>{l({...s,password:a})}})}),e.jsx("div",{className:"w-full flex justify-center",children:e.jsx(F,{onValueChange:a=>{l({...s,recaptcha:a})}})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-start",children:e.jsx(E,{isSelected:s.remember,onValueChange:a=>{l({...s,remember:a})},children:r("pages.sign_in.remember_me")})}),e.jsx(c,{isDisabled:!0,className:"font-medium",href:"/forgot_password",children:r("pages.sign_in.forgot_password")})]}),e.jsx(x,{className:"font-bold",color:"primary",fullWidth:!0,size:"lg",onClick:y,children:r("pages.sign_in.sign_in")}),e.jsx("p",{className:"text-sm font-light text-gray-500 dark:text-gray-400",children:e.jsx(S,{i18nKey:"pages.sign_in.hint_sign_up",components:{Link:e.jsx(c,{className:"font-medium",size:"sm",href:"/signup"})}})})]}),e.jsx("div",{className:"flex justify-center mt-6",children:e.jsx(x,{color:"secondary",startContent:e.jsx(G,{height:"1.5rem",width:"1.5rem"}),variant:"bordered",className:"font-medium",fullWidth:!0,onClick:_,children:r("pages.sign_in.use_google")})})]})}),e.jsx(B.Login,{})]})};export{ee as default};
