import{r as i,z as v,ad as w,u as b,ae as y,j as e,l,af as N,b as C,ag as R,ah as A}from"./index-CulB5GRl.js";import{P as L,R as k,c as _}from"./recaptcha-wrapper-DEwWcTYd.js";import{i as f,a as u}from"./validator-CEpkGiwj.js";import{i as z}from"./chunk-TC4QW7OA-DPuHMej8.js";import{s as P}from"./chunk-KRADFROI-DJIs_k_d.js";import"./chunk-M3MASYO7-Csn0uAC7.js";const D=()=>{const[a,t]=i.useState({certificate:"",password:"",recaptcha:"",remember:!1}),h=i.createRef(),{show:r}=v(),c=w(),{authed:p,update:x}=b(),{mode:g}=y();i.useEffect(()=>{if(p()){c("/");return}},[]);const j=()=>{if(!f(a.certificate)&&!u(a.certificate)||!a.password){r({message:"Invalid form input"});return}A({email:u(a.certificate)?a.certificate:void 0,username:f(a.certificate)?a.certificate:void 0,password:a.password}).then(s=>{var o,n,d,m;if(!((o=s.data)!=null&&o.status)){r({message:(n=s.data)==null?void 0:n.msg});return}x({ticket:(d=s.data.data)==null?void 0:d.ticket,expire:(m=s.data.data)==null?void 0:m.expire}),c("/")}).catch(s=>{r({message:s.toString()})})};return e.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 mx-auto h-screen lg:py-0",children:[e.jsx(l,{href:"/",children:e.jsx(N,{className:"select-none",width:200,loading:"lazy"})}),e.jsx("div",{className:"w-full mt-6 sm:max-w-md xl:p-0",children:e.jsx("div",{className:"p-2",children:e.jsxs("form",{className:"space-y-4 md:space-y-6",action:"#",children:[e.jsx("div",{children:e.jsx(z,{isClearable:!0,className:"font-medium",type:"email",labelPlacement:"outside",label:"Username or email address",variant:"bordered",placeholder:" ",value:a.certificate,onValueChange:s=>{t({...a,certificate:s})},onClear:()=>{t({...a,certificate:""})}})}),e.jsx(P,{y:4}),e.jsx("div",{children:e.jsx(L,{className:"font-medium",labelPlacement:"outside",label:"Password",variant:"bordered",placeholder:" ",value:a.password,onValueChange:s=>{t({...a,password:s})}})}),e.jsx("div",{className:"w-full flex justify-center",children:e.jsx(k,{style:{width:302,height:76,borderRadius:3,overflow:"hidden"},theme:g,ref:h,size:"normal",sitekey:"6Lekx48pAAAAANMG7YML6sG9R8o4lorLH3UwMYve",onChange:s=>{t({...a,recaptcha:s})}})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-start",children:e.jsx(_,{isSelected:a.remember,onValueChange:s=>{t({...a,remember:s})},children:"Remember me"})}),e.jsx(l,{isDisabled:!0,className:"font-medium",href:"/forgot_password",children:"Forgot password?"})]}),e.jsx(C,{className:"font-bold",color:"primary",fullWidth:!0,size:"lg",onClick:j,children:"Sign in"}),e.jsxs("p",{className:"text-sm font-light text-gray-500 dark:text-gray-400",children:["Donâ€™t have an account yet? ",e.jsx(l,{className:"font-medium",size:"sm",href:"/signup",children:"Sign up!"})]})]})})}),e.jsx(R.Login,{})]})};export{D as default};
